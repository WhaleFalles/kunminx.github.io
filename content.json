{"pages":[],"posts":[{"title":"Androidï¼š1åˆ†é’ŸæŒæ¡ ViaBus æ¶æ„çš„ä½¿ç”¨","text":"0. åœ¨æ¨¡å—çš„ build.gradle æ·»åŠ å¦‚ä¸‹ä¾èµ–1implementation &quot;com.kunminx.viabus:viabus-architecture:0.4.3&quot; 1. å®šä¹‰æ¥å£ï¼Œç”¨äºå‘é€è¯·æ±‚ã€‚ æ¥å£é¡»ç»§æ‰¿äº IRequestï¼Œå¦‚ï¼š12345678public interface INoteRequest extends IRequest{ void queryList(); void insert(NoteBean bean); ...} 2. å®šä¹‰ busï¼Œç”¨äºæ”¯æŒè¯·æ±‚æ¥å£çš„è®¿é—®ã€‚ bus é¡»ç»§æ‰¿äºBaseBusï¼Œå¦‚ï¼š12345678public class NoteBus extends BaseBus { public static INoteRequest note() { return (INoteRequest) getRequest(INoteRequest.class); } ...} 3. å°† ui æ³¨å†Œæˆä¸ºå“åº”æ¥æ”¶è€…ã€‚ åœ¨ ui ä¸­ï¼Œé€šè¿‡ bus å‘é€æ•°æ®è¯·æ±‚ã€‚å¹¶åœ¨ onResult ä¸­ï¼Œä¾æ®å“åº”ç å®ç° ui é€»è¾‘çš„å¤„ç†ã€‚12345678910111213141516171819202122232425262728293031323334353637public class NoteListFragment extends Fragment implements IResponse { @Override public void onCreate(@Nullable Bundle savedInstanceState) { ... NoteBus.registerResponseObserver(this); } @Override public void onViewCreated(View view, @Nullable Bundle savedInstanceState) { ... NoteBus.note().queryList(); } @Override public void onResult(Result testResult) { String resultCode = (String) testResult.getResultCode(); switch (resultCode) { case NoteResultCode.QUERY_LIST: if (testResult.getResultObject() != null) { mAdapter.setList((List&lt;NoteBean&gt;) testResult.getResultObject()); mAdapter.notifyDataSetChanged(); } break; case NoteResultCode.INSERTED: ... } } @Override public void onDestroy() { ... NoteBus.unregisterResponseObserver(this); }} 4. åœ¨æ¨¡å—çš„ç®¡ç†ç±»ä¸­ï¼Œå°† ä¸šåŠ¡ æ³¨å†Œæˆä¸ºè¯·æ±‚å¤„ç†è€…ã€‚12345678910public class MainActivity extends AppCompatActivity { @Override protected void onCreate(Bundle savedInstanceState) { NoteBusiness noteBusiness = new NoteBusiness(); noteBusiness.init(getApplicationContext()); NoteBus.registerRequestHandler(noteBusiness); ... }} 5. åœ¨ä¸šåŠ¡ä¸­å¼‚æ­¥å¤„ç†å„ç§è¯·æ±‚ã€‚ æœŸé—´å¯å‘é€è¿›åº¦æ¶ˆæ¯ï¼Œæœ€åå¯è¿”å›ç»“æœæ•°æ®ã€‚ä¸šåŠ¡é¡»ç»§æ‰¿äº BaseBusinessã€‚12345678910111213141516171819public class NoteBusiness extends BaseBusiness&lt;NoteBus&gt; implements INoteRequest { @Override public void queryList() { handleRequest((e) -&gt; { List&lt;NoteBean&gt; list = mDataBase.getList(null, null); ... sendMessage(e, new Result(NoteResultCode.PROGRESS, bean.getId())); ... return new Result(NoteResultCode.QUERY_LIST, list); }); } @Override public void insert(NoteBean bean) { handleRequest((e) -&gt; { ... }); } ...} â­ ViaBus æ¶æ„å·²åœ¨ Github å¼€æºï¼Œæ¬¢è¿ Star &amp; Fork ~Github : KunMinX / android-viabus-architecture æ›´å¤šæ–‡ç« Androidï¼šå››å¤§æ¶æ„çš„ä¼˜ç¼ºç‚¹ï¼Œä½ çœŸçš„äº†è§£å—ï¼ŸViabus - å¹´è½»äººçš„ç¬¬ä¸€æ¬¾æ¶æ„Androidï¼šä½ è¿˜åœ¨ç­‰é‚£ä¸ªï¼Œæ‰‹æŠŠæ‰‹å¸¦ä½ é‡æ„çš„äººå‡ºç°å—ï¼Ÿ","link":"/2018/09/25/Androidï¼š1åˆ†é’ŸæŒæ¡ ViaBus æ¶æ„çš„ä½¿ç”¨/"},{"title":"Androidï¼šViabus - å¹´è½»äººçš„ç¬¬ä¸€æ¬¾æ¶æ„","text":"å‰è¨€ä½ è¿˜åœ¨ç­‰é‚£ä¸ªï¼Œæ‰‹æŠŠæ‰‹å¸¦ä½ é‡æ„çš„äººå‡ºç°å—ï¼Ÿ ä½ æ˜¯å¦ç»å¸¸å¬åŒäº‹è‡ªå˜²ï¼Œâ€œå¼€å§‹è¿˜æƒ³å¥½å¥½å†™ï¼Œä¸çŸ¥æ€æ»´ï¼Œåé¢è¶Šå†™è¶Šçƒ‚â€ï¼Ÿ ä½ çŸ¥é“ä¸ºä»€ä¹ˆï¼Œâ€œä»£ç è§£è€¦â€ ç¦ç‰¹æœ€æœ‰è¯è¯­æƒå—ï¼Ÿ åœ¨ç»å† 5840 å°æ—¶çš„æ¢ç´¢å’Œè·µè¡Œï¼ŒæŸè‡ªä¸»è®¾è®¡çš„æ¶æ„å·²æˆåŠŸåº”ç”¨äºå…¬å¸å•†ä¸šçº§äº§å“ã€‚å°±åœ¨å‰ä¸ä¹…ï¼Œ5 å¤©å†…å®Œæˆ 60 ä¸ªç±»çš„æ ¸å¿ƒæ¨¡å—çš„é‡æ„ï¼Œä»¥æ”¯æŒæœªæ¥å¯¹å…¨å›½ 100 ä¸ªä¹¡é•‡åœ°åŒºçš„åŠŸèƒ½å®šåˆ¶éœ€æ±‚ã€‚ï¼ˆä¸è¦æ…Œï¼Œæ¶æ„å·²åœ¨ GitHub å¼€æºï¼Œæ–‡æœ«é“¾æ¥ç»™å‡ºï¼Œè€Œä½ åªéœ€ 1 åˆ†é’Ÿæ—¶é—´ï¼Œå°±èƒ½æŒæ¡è¯¥æ¶æ„çš„ä½¿ç”¨ã€‚ï¼‰ ä»€ä¹ˆæ˜¯ ViaBusâ­ ViaBus æ˜¯ä¸€æ¬¾å“åº”å¼æ¶æ„ï¼Œæ¶ˆæ¯é©±åŠ¨ç¼–ç¨‹ã€‚é€šè¿‡ bus è½¬å‘æ•°æ®çš„è¯·æ±‚å’Œå“åº”ï¼Œå®ç° UI å’Œ ä¸šåŠ¡ çš„å®Œå…¨è§£è€¦ã€‚ ä¸ºä»€ä¹ˆé€‰æ‹© ViaBus 1 åˆ†é’Ÿå³å¯æŒæ¡ï¼ŒViaBus çš„æ„é€ ä¸ä½¿ç”¨æ–¹å¼ã€‚ğŸ’¡ å½“ä¸‹å°±å¯ä½¿ç”¨ï¼Œå¯¹åŸé¡¹ç›®æ¶æ„å®Œå…¨å…¼å®¹ï¼Œå³æ’å³ç”¨ã€‚ğŸ”¥ å…è®¸ä»¥ ä¸šåŠ¡æˆ–æ¨¡å—ä¸ºå•ä½ï¼Œæ¯å¤©1å°æ—¶ï¼Œå®Œæˆæ¸è¿›å¼é‡æ„ã€‚ğŸ’§ èŒè´£è¾¹ç•Œæ˜ç¡®ï¼Œæ— è®ºæ˜¯å†™ UI è¿˜æ˜¯ä¸šåŠ¡ï¼Œä¸å†è¢«æ‰“æ–­ã€ç›¸äº’ä¸æ‹–ç´¯ã€‚ğŸŒ± åŸç”Ÿæ¥å£å³å¯å®ç° è·¨ Activityã€è·¨ç»„ä»¶çš„ å®æ—¶åŒå‘é€šä¿¡ã€‚âš¡ æ— ç¼–è¯‘æ—¶æ³¨è§£ï¼ŒåŸºäº Viabus ç¼–å†™çš„ç»„ä»¶å¯åœ¨ä»»ä½•é¡¹ç›®ä¸­ç›´æ¥ä½¿ç”¨ã€‚ğŸŒ æ›´å°‘çš„é‡å¤å·¥ä½œï¼Œæ‰å¹³çš„äº¤äº’æ¨¡å¼ï¼Œä»£ç å¤ç”¨ç‡æå‡è‡³100%ã€‚ğŸ’ªâ€¦ æ›´å¤šä¾æ®è¯¦è§ wiki - Android å››å¤§æ¶æ„çš„ä¼˜ç¼ºç‚¹ï¼Œä½ çœŸçš„äº†è§£å—ï¼Ÿ å¦‚ä½•ä½¿ç”¨ ViaBusåœ¨æ¨¡å—çš„ build.gradle æ·»åŠ å¦‚ä¸‹ä¾èµ–1implementation &quot;com.kunminx.viabus:viabus-architecture:0.4.3&quot; ä½¿ç”¨æ–¹æ³•è¯¦è§ wiki - 1åˆ†é’ŸæŒæ¡ ViaBus æ¶æ„çš„ä½¿ç”¨ å¼€æºåœ°å€GitHubï¼šKunMinX/android-viabus-architecture æ›´å¤šè®¿é—®Androidï¼šä½ è¿˜åœ¨ç­‰é‚£ä¸ªï¼Œæ‰‹æŠŠæ‰‹å¸¦ä½ é‡æ„çš„äººå‡ºç°å—ï¼Ÿ","link":"/2018/09/25/Androidï¼šViabus - å¹´è½»äººçš„ç¬¬ä¸€æ¬¾æ¶æ„/"},{"title":"Rxé’¥åŒ™ï¼šä¸ºæ— èŠè€Œç”Ÿçš„ Android å¼€å‘è€…å·¥å…·","text":"å¾ˆé«˜å…´å’Œå¤§å®¶è§é¢ï¼ ç¼˜äº 4 æœˆä¸­æ—¬ï¼Œæˆ‘åœ¨æ˜é‡‘å‘è¡¨çš„ ã€Šä½ ç”¨ä¸æƒ¯ RxJavaï¼Œåªå› ç¼ºäº†è¿™æŠŠé’¥åŒ™ã€‹ ï¼ˆä»¥ä¸‹ç®€ç§° â€œRxé’¥åŒ™â€ ï¼‰ã€‚ åŸæœ¬ç›®æ ‡åªæ˜¯ç»™å¤§å®¶ä¸€æŠŠé’¥åŒ™ï¼Œæ–¹ä¾¿å¤§å®¶æ„ä¼š RxJava æ“ä½œç¬¦çš„æœ¬è´¨ï¼Œæƒ³ä¸åˆ°åœ¨åå°æ”¶åˆ° 40 å¤šæ¡ç•™è¨€ã€‚æœ‰çš„è¯»è€…å› ä¸ºè±ç„¶å¼€æœ—è€Œå–œå‡ºæœ›å¤–ï¼Œä¸åç•™ä¸‹å¤¸å¼ çš„èµç¾ï¼›ä¹Ÿæœ‰è¯»è€…è§‰å¾—æ„çŠ¹æœªå°½ï¼Œè¡¨è¾¾äº†å¯¹è§è¯æ›´å¤šçš„æ„¿æœ›ã€‚ ä»ç•™è¨€ä¸­ï¼Œæˆ‘çœ‹åˆ°äº†çƒ­å¿ƒç½‘å‹ä»¬å¯¹ Rxé’¥åŒ™ çš„æœŸå¾… å’Œ å„è‡ªå†…å¿ƒä¸–ç•Œçš„ä¸°å¯Œå¤šå½©ï¼Œè¿™äº›æœŸå¾…ç”šè‡³è¿œè¿œè¶…å‡ºäº† Rxé’¥åŒ™ æœ¬èº«ï¼ŒæœŸæœ›å®ƒæ˜¯ä¸€æŠŠèƒ½å¤Ÿè§£å†³æ— èŠã€å¸¦ç»™è‡ªå·±æ›´å¤šçš„ é­”æ³•æ£’ã€‚ å†åŠ ä¸Šï¼Œæˆ‘è‡ªå·±ä¹Ÿå› ä¸º â€œæ‹¿ SQL æ¥éšå–»æ“ä½œç¬¦â€ çš„é‚£ç•ªè§è§£ï¼Œè€Œå¿ƒç”Ÿçµæ„Ÿï¼š ä¸å¦‚åšä¸€ä»¶å²ä¸Šæœ€æ— èŠçš„äº‹å§ â€”â€” åƒè®¾è®¡å¸ˆä¸€æ ·å°†æ¯ä¸ªåƒç´ éƒ½æŠ åˆ°æè‡´ï¼Œåƒå·¥ç¨‹å¸ˆä¸€æ ·å°†å·¥ç¨‹è®¾è®¡æ¨¡å¼å’ŒåŸåˆ™åº”ç”¨åˆ°æ¯ä¸€ä¸ªåŠŸèƒ½çš„ç¼–å†™ï¼Œç”¨æ— èŠçš„æ–¹å¼æ¥å¯¹æŠ—æ— èŠ â€”â€” è¿™æ˜¯ä¸€æ¬¾ä¸ºæ— èŠè€Œç”Ÿçš„é¢å‘ Android å¼€å‘è€…çš„æ“ä½œç¬¦ç»ƒä¹ å·¥å…·ã€‚ Add Operators Output Code Clear Expressions é™¤äº†æä¾› â€œè§£å†³æ— èŠâ€ è¿™ä¸€æœ€æ ¸å¿ƒåŠŸèƒ½ä¹‹å¤–ï¼Œä½ è¿˜å¯ä»¥ä»è¿™ä¸ªå¼€æºé¡¹ç›®è·å¾—çš„å†…å®¹åŒ…æ‹¬ï¼š æ•´æ´çš„ä»£ç é£æ ¼å’Œæ ‡å‡†çš„èµ„æºå‘½åè§„èŒƒã€‚ åŸºäºå‰æ²¿çš„ã€éµå¾ªå…³æ³¨ç‚¹åˆ†ç¦»çš„ JetPack MVVM æ¶æ„ã€‚ ä½¿ç”¨ RxJava å’Œ lambda è¡¨è¾¾å¼ã€‚ AndroidX å’Œ Material Design 2 çš„å…¨é¢ä½¿ç”¨ã€‚ ConstraintLayout çº¦æŸå¸ƒå±€çš„æœ€ä½³å®è·µã€‚ ä¸ºæå‡æ‰‹æœºæ¡Œé¢çš„é€¼æ ¼åšè´¡çŒ®ï¼Œè®©çŸ¥è¯†ä¸ç¾è§‚å¹¶å­˜ï¼Œå³ä½¿ä»ä¸æ‰“å¼€ã€‚ ç»ä¸ä½¿ç”¨ Daggerï¼Œç»ä¸ä½¿ç”¨å¥‡æŠ€æ·«å·§ã€ç¼–å†™è‰°æ·±æ™¦æ¶©çš„ä»£ç ã€‚ é•¿æœŸæ›´æ–°ã€‚ å¦‚ä½ æ‰€è§ï¼ŒRxé’¥åŒ™çš„ç•Œé¢æ•ˆæœå¤§ä½“å·²ç»å‡ºæ¥äº†ï¼Œæˆ‘çš„ç›®æ ‡æ˜¯ï¼Œå°†é¦–é¡µå…ˆæ‰“ç£¨å¥½ï¼Œè¿™æ · Rxé’¥åŒ™ çš„ Apk æœ€å¿«å¯èƒ½ä¸‹å‘¨å°±èƒ½æ­£å¼å’Œå¤§å®¶è§é¢äº†ã€‚ é‰´äºç›®å‰åœ¨ RxJava è¡¨è¾¾å¼çš„ä¹¦å†™ä¸Šå­˜æœ‰ä¸€äº›å­—ç¬¦è”æƒ³ä¸Šçš„å°é—®é¢˜ï¼Œå¦‚æœä½ å¯¹æ­¤ååˆ†ç†Ÿæ‚‰ï¼Œè¯·ä¸åå‚ä¸è¿›æ¥ï¼Œè¿™ä¸ªé¡¹ç›®ä¼šå› ä¸ºä½ çš„å‚ä¸è€Œå˜å¾—æ›´å¥½ï¼ é¡¹ç›®é“¾æ¥ï¼šhttps://github.com/KunMinX/RxJava2-Operators-Sample","link":"/2019/04/29/Rxé’¥åŒ™ï¼šä¸ºæ— èŠè€Œç”Ÿçš„ Android å¼€å‘è€…å·¥å…·/"},{"title":"Androidï¼šè¿™æ˜¯ä¸€ä¸ªé«˜çº§å·¥ç¨‹å¸ˆçš„å›½åº†å……ç”µè§„åˆ’","text":"å‰è¨€å‰ä¸ä¹…åˆšç»“æŸå¯¹ 20 æ¨¡å—é¡¹ç›®çš„ç¬¬ 3 è½®é‡æ„ï¼Œä¸€è·¯è§è¯ MVCã€MVPã€Clean çš„ä¼˜ç¼ºç‚¹å¹¶å½¢æˆè‡ªå·±çš„ä½“ä¼šã€‚ è¿‘æœŸåœ¨æ€»ç»“å·¥ä½œç»éªŒçš„åŒæ—¶ï¼Œå¼€å§‹å†™åšå®¢ã€‚ ä¹‹æ‰€ä»¥å°†è§„åˆ’æ”¾å‡ºæ¥ï¼Œä¸€æ¥æ˜¯æ€»ç»“çš„è¿‡ç¨‹ä¸­å·²ç»å½¢æˆåº•ç¨¿ï¼Œä¸å¦‚å’Œå¤§å®¶ä¸€å—åˆ†äº«ï¼Œå„æŠ’å·±è§ã€‚äºŒæ¥ç²˜è´´å¸ƒå‘Šï¼Œèƒ½æœ‰æ•ˆç£ä¿ƒè‡ªå·±æ‰§è¡Œã€‚ Viabus æ¶æ„ çš„å¼€æºå°±æ˜¯å› ä¸ºæœ‰ä¸€å¤©ï¼Œå’ŒåŒäº‹èŠç€èŠç€è¯´è¦å¼€æºï¼Œç»“æœå°±çœŸçš„å°±åšäº†ã€‚ å›½åº†è§„åˆ’ç”±äº Viabus å¯¹å¾ˆå¤šäººæ¥è¯´ï¼Œæ˜¯ä¸ªå¾ˆé™Œç”Ÿçš„ä¸œè¥¿ï¼Œå› æ­¤å¦‚æœæƒ³è®©æ›´å¤šäººäº«å—åˆ°ï¼Œâ€œåˆç†è€Œå¿«æ·â€ çš„å¼€å‘ä½“éªŒï¼Œå¯ä¸æ˜¯ä¸€ä»¶ç®€å•çš„äº‹ã€‚ å¯¹æ­¤æˆ‘æƒ³çš„æ‹›æ˜¯ï¼Œå…ˆåœ¨ç½‘ä¸Šæ‰¾ä¸ªæ–‡è‰ºå°æ¸…æ–°çš„é¡¹ç›®ï¼Œé‡æ„ï¼Œç„¶åæŒ‚åœ¨ Github é¡¹ç›®é¡µé¢) ä¸‹æ–¹ï¼Œè¿™æ ·äººä»¬å°±æ„¿æ„å°è¯•ï¼Œæ¯•ç«Ÿè¯•é”™æˆæœ¬è¶…çº§å°å˜›ã€‚ åœ¨é¡¹ç›®é‡æ„å‰ï¼Œæˆ‘éœ€è¦åˆ©ç”¨å›½åº†ä¸ƒå¤©åšä¸€äº›å‡†å¤‡å·¥ä½œã€‚ ä»¥ä¸Šæ˜¯æˆ‘ä¾æ® â€œä¸ªäººå¼€å‘â€ çš„é¡ºåºæµç¨‹è€Œç½—åˆ—çš„æŠ€æœ¯å †æ ˆã€‚ åšè¿‡ä¸ªäººå¼€å‘çš„ä¸€å®šçŸ¥é“ï¼Œæœ€å¤´ç–¼çš„è«è¿‡äºè¢«ä¸€äº›éä¸“ä¸šå±‚é¢çš„äº‹æƒ…æ‰“æ–­ã€‚ä¾‹å¦‚å¦‚ä½•è®¾è®¡ä¸€ä¸ªå¥½çœ‹çš„ç•Œé¢ï¼Œè¿™ä¸ªé¡µé¢çš„è§†è§‰äº¤äº’è¯¥å¦‚ä½•å¦‚ä½•ã€‚ å¦‚æœè¿™äº›äº‹æƒ…ä¸€å¼€å§‹æ²¡æœ‰å®šå¥½ï¼Œé‚£è½¯ä»¶å¼€å‘æ ¹æœ¬æ— ä»å¼€å§‹ã€‚å› ä¸ºå¦‚æœæ²¡æœ‰ä¸€ä¸ªå¥½çœ‹çš„ç•Œé¢ï¼Œä½ éƒ½ä¸ä¼šç›¸ä¿¡è¿™ä¸ªè½¯ä»¶èƒ½å—äººå–œæ¬¢ï¼Œé¦–å…ˆè‡ªå·±å°±ä¸ç›¸ä¿¡ã€ä¸å–œæ¬¢ã€‚ å†è€…ï¼Œå¦‚æœæ²¡æœ‰ä¸€ä¸ªæ—¢å®šçš„ç•Œé¢è®¾è®¡ï¼Œé‚£ä¹ˆå¼€å‘çš„è¿‡ç¨‹ä¸­å°±ä¼šä¸æ–­çš„æ–Ÿé…Œï¼Œååå¤å¤ï¼Œæ¶ˆç£¨äº†å¼€å‘çš„çƒ­æƒ…ã€æ‹–å»¶äº†è¿›åº¦ã€‚ å› æ­¤æƒ³åˆ°çš„å¥½æ‹›å°±æ˜¯ä¸Šè¿°è¯´çš„ï¼Œé‡æ„å¸‚é¢ä¸Šå·²æœ‰çš„äº§å“ã€‚ è½¯ä»¶çš„æœ¬è´¨è½¯ä»¶çš„æœ¬è´¨æ˜¯æ•°æ®çš„äº¤äº’ã€‚æ•°æ®æ˜¯ app çš„çµé­‚ã€‚ å› è€Œé™¤äº†é‚£äº›å·¥å…·ç±»è½¯ä»¶ï¼Œå¤šæ•°è½¯ä»¶åªæœ‰å’Œåå°å»ºç«‹äº†è¿æ¥ï¼Œæ‰èƒ½æºæºä¸æ–­çš„æ‹¿åˆ°æ•°æ®å’Œå±‚å‡ºä¸ç©·çš„å˜æ¢ç€å±•ç¤ºã€‚ æ‰€ä»¥ç¬¬ä¸€ä¸ªè¦æŒæ¡çš„å°±æ˜¯ æŠ“åŒ…ã€‚ æ•™ç¨‹ç½‘ä¸Šä¸€æœä¸€å¤§æŠŠï¼Œé“¾æ¥æˆ‘å°±ä¸æä¾›äº†ã€‚å¯ä»¥ä½¿ç”¨ Charlesï¼ˆMacï¼‰ Fiddlerï¼ˆWindowsï¼‰ æ¥å®ŒæˆæŠ“åŒ…å·¥ä½œã€‚ é™¤æ­¤ä¹‹å¤–ï¼Œè¿‡ç¨‹ä¸­å¯èƒ½è¿˜è¦æ¶‰çŒä¸€ç•ª http åè®®å’Œ TCPIP ä½“ç³»ç»“æ„ã€‚æŒæ¡å®ƒä»¬çš„æ¦‚å¿µï¼Œéƒ½æ˜¯ä¼šç”¨çš„åˆ°çš„ã€‚ è½¯ä»¶é‡æ„çš„ç›®æ ‡è½¯ä»¶çš„æœ¬è´¨æ˜¯æ•°æ®çš„äº¤äº’ã€‚æ— è®ºæ˜¯å¤šä¹ˆç®€å•è¿˜æ˜¯å¤æ‚çš„è½¯ä»¶ï¼Œéƒ½éµå®ˆè¿™ä¸€å®šå¾‹ã€‚å°åˆ°ä¸€ä¸ªæ–¹æ³•ï¼šè¾“å…¥å‚æ•°ï¼Œè¿”å›ç»“æœï¼Œå¤§åˆ°ä¸€ä¸ªä¸šåŠ¡ï¼Œä¸€ä¸ªæ¨¡å—ï¼Œè¾“å…¥é…ç½®ï¼Œè¿”å›ç»“æœã€‚éƒ½æ˜¯ä¸€ä¸ªé“ç†ã€‚ é‚£ä¹ˆè½¯ä»¶é‡æ„çš„ç›®æ ‡ï¼Œå°±æ˜¯å°†ä¸ç¬¦åˆè½¯ä»¶æœ¬è´¨å®šå¾‹å¼€å‘çš„è½¯ä»¶ï¼Œæ¨å€’é‡æ¥ï¼Œä¾æ®è¯¥å®šå¾‹æ¥å¼€å‘ã€‚ åœ¨è¯¥å®šå¾‹çš„æŒ‡å¯¼ä¸‹ï¼ŒUI å’Œ ä¸šåŠ¡ æ˜¯å®Œå…¨åˆ†ç¦»çš„ã€‚UI çš„èŒè´£ä»…é™äºè¯·æ±‚æ•°æ®å’Œå¤„ç† UI é€»è¾‘ï¼Œä¸šåŠ¡çš„èŒè´£ä»…é™äºå¤„ç†è¯·æ±‚å’Œè¿”å›ç»“æœã€‚å› æ­¤ UI åªè´Ÿè´£ UIï¼Œå®ƒä¸éœ€è¦çŸ¥é“ä¸šåŠ¡æ˜¯æ€ä¹ˆå‡†å¤‡æ•°æ®çš„ï¼Œä¸šåŠ¡åªè´Ÿè´£æ•°æ®ï¼Œå®ƒä¸éœ€è¦ UI åœ¨æ‹¿åˆ°æ•°æ®åæ€ä¹ˆä½¿ç”¨æ€ä¹ˆå¤„ç†ã€‚ åˆšå¥½ç¬¦åˆè®¾è®¡æ¨¡å¼çš„6å¤§åŸåˆ™ã€‚ å› æ­¤ï¼Œè¿›ä¸€æ­¥è¯´ï¼Œè½¯ä»¶é‡æ„çš„ç›®æ ‡ï¼Œ ä¸€æ˜¯ä½¿æ•°æ®çš„äº¤äº’æ ‡å‡†åŒ–ã€‚åº•çº¿æ˜¯ï¼Œæ•°æ®é…ç½®å’Œèµ„æºçš„å­˜æ”¾ä½ç½®ï¼Œå¿…é¡»ä¾¿äºè”æƒ³ã€‚æ•°æ®åç§°çš„å®šä¹‰ï¼Œå¿…é¡»è§„èŒƒåŒ–ï¼Œä¸å…è®¸ä½¿ç”¨é­”æ³•å€¼ã€‚ äºŒæ˜¯ä½¿æ•°æ®çš„äº¤äº’æ¨¡å¼åŒ–ã€‚æ„æ€æ˜¯ï¼Œæ•°æ®äº¤äº’çš„åŒæ–¹èŒè´£æ˜ç¡®ã€èŒè´£è¾¹ç•Œæ˜ç¡®ã€ç‹¬ç«‹è‡ªä¸»ã€äº’ä¸å¹²æ¶‰ã€‚ ä¸ºæ­¤ç¬¬äºŒæ­¥å°±æ˜¯ï¼ŒæŸ¥é˜…ä¸€ä¸‹æ•°æ®äº¤äº’æ¡†æ¶çš„æºç ï¼Œå¯¹è®¾è®¡æ¨¡å¼åœ¨ android ä¸­çš„å¹¿æ³›åº”ç”¨æœ‰æ‰€è§è¯ã€‚ é€šç”¨å¿…ç”¨ Widget çš„å‡†å¤‡ç£¨åˆ€ä¸è¯¯ç æŸ´å·¥ï¼Œå¹³æ—¥é‡Œå°±è¦æ€»ç»“ã€å½’ç±»å’Œå°è£…ä½ åœ¨é¡¹ç›®ä¸­å¿…ç„¶ä¼šç”¨çš„åˆ°çš„æ§ä»¶ã€‚ä¾‹å¦‚åˆ—è¡¨ã€èœå•ã€å¯¹è¯æ¡†ç­‰ç­‰ã€‚è¿™æ ·åœ¨ç¼–å†™æ–°é¡¹ç›®æ—¶ï¼Œä¸ä¼šè¢«æ‰“æ–­ã€‚ æ ¹æ®ä½¿ç”¨åœºæ™¯ï¼Œæˆ‘å°†æ§ä»¶åˆ†ä¸ºä»¥ä¸‹å››ç±»ï¼š 1.å±•ç¤ºç±»ã€‚æ˜¯é‚£äº›ä¾›å±•ç¤ºï¼Œä¸å¯ç¼–è¾‘çš„æ§ä»¶ã€‚ä¾‹å¦‚å¼•å¯¼é¡µã€ä¿¡æ¯å±•ç¤ºé¡µã€‚ 2.æç¤ºç±»ã€‚åƒåå¸ã€å¯¹è¯æ¡†ç­‰ç­‰ï¼ŒåŠæ—¶æé†’ç”¨æˆ·å¿…è¦ä¿¡æ¯çš„æ‰‹æ®µã€‚æˆ‘ä»¬å¯ä»¥é€šè¿‡å®ƒä»¬æ¥å¢å¼ºè½¯ä»¶çš„è¡¨ç°åŠ›ï¼Œä»¥è·å–ç”¨æˆ·çš„ä¿¡ä»»ã€‚ 3.å¯¼èˆªç±»ã€‚å°±æ˜¯ç‚¹å‡»å³å¯ä»æ­¤å¤„è·³è½¬åˆ°åˆ«å¤„çš„æ§ä»¶ã€‚ä¾‹å¦‚åˆ—è¡¨ã€æŒ‰é’®ç­‰ã€‚ 4.è¡¨å•ç±»ã€‚å°±æ˜¯å¯ä»¥æ‰§è¡Œè¾“å…¥ã€å‹¾é€‰ç­‰è¡¨å•æ“ä½œã€‚ æ€»ç»“ä»¥ä¸Šå°±æ˜¯å›½åº†æœŸé—´çš„è§„åˆ’ï¼š 1.å¯»æ‰¾æ–‡è‰ºå°æ¸…æ–°é¡¹ç›®ï¼ŒæŠ“åŒ…ï¼Œæ¸©ä¹ httpå’ŒTCPIPã€‚ 2.å½’ç±»å’Œæ•´ç†é€šç”¨å¿…ç”¨æ§ä»¶ï¼Œä¾›åæœŸä¸æ–­å°è£…ã€‚ 3.æŸ¥é˜…æ•°æ®äº¤äº’æ¡†æ¶çš„æºç ï¼Œè§è¯è®¾è®¡æ¨¡å¼ã€‚ æ„Ÿè°¢ä½ çš„é˜…è¯»ï¼Œæ¬¢è¿ç‚¹èµè¯„è®ºç£ä¿ƒæˆ‘å®Œæˆï¼ æ›´å¤šæ–‡ç« Github : KunMinX / android-viabus-architectureAndroidï¼šå››å¤§æ¶æ„çš„ä¼˜ç¼ºç‚¹ï¼Œä½ çœŸçš„äº†è§£å—ï¼ŸViabus - å¹´è½»äººçš„ç¬¬ä¸€æ¬¾æ¶æ„Androidï¼šä½ è¿˜åœ¨ç­‰é‚£ä¸ªï¼Œæ‰‹æŠŠæ‰‹å¸¦ä½ é‡æ„çš„äººå‡ºç°å—ï¼Ÿ","link":"/2018/09/30/Androidï¼šè¿™æ˜¯ä¸€ä¸ªé«˜çº§å·¥ç¨‹å¸ˆçš„å›½åº†å……ç”µè§„åˆ’/"},{"title":"ä½ ç”¨ä¸æƒ¯ RxJavaï¼Œåªå› ç¼ºäº†è¿™æŠŠé’¥åŒ™","text":"å‰è¨€æœ¬æ–‡æœ€åˆæ˜¯ä¸ºéƒ¨é—¨å†…éƒ¨åŸ¹è®­è€Œå‡†å¤‡çš„ï¼Œä½†ç»è¿‡ä¸€ç•ªè°ƒç ”å‘ç°ï¼ŒåŒäº‹ä»¬ç”¨ä¸æƒ¯ RxJavaï¼Œå¹¶ä¸æ˜¯å› ä¸ºç½‘ä¸Šä»‹ç» â€œæ€ä¹ˆç”¨â€ çš„æ•™ç¨‹ä¸å¤Ÿå¤šï¼Œæ°æ°æ˜¯å› ä¸ºï¼Œä¸€ä¸Šæ¥å°±æ€¥ç€å‘è½¦çš„æ•™ç¨‹æ— æ•°ã€å´ä»æœªæœ‰è¿‡å“ªç¯‡æ•™ç¨‹ èˆå¾—ç”¨å‡ å¥è¯çš„åŠŸå¤«ç‚¹ç ´ RxJava æ“ä½œç¬¦ç©¶ç«Ÿä¸ºä½•æ–¹ç¥åœ£ã€æˆ‘ä»¬ä¸ºä»€ä¹ˆè¦ç”¨ã€ä¸ºä»€ä¹ˆè¦é‚£æ ·ç”¨ã€‚ 1234Observable.just(1, 3, 5, 7, 9) .map(i -&gt; i + 1) .filter(i -&gt; i &lt; 5) .subscribe(getObserve()); äº‹å®ä¸Šï¼Œåœ¨ç›¸å½“é•¿çš„ä¸€æ®µæ—¶é—´é‡Œï¼Œæˆ‘ä¹Ÿå’Œå¤§éƒ¨åˆ†äººä¸€æ ·ï¼ŒåªçŸ¥é“ä½¿ç”¨ RxJava æ¥å®Œæˆå¼‚æ­¥å›è°ƒï¼Œè‡³äºé‚£äº›æ“ä½œç¬¦ï¼Œåˆ™æ˜¯èƒ½ä¸ç”¨å°½é‡ä¸ç”¨ï¼Œå› ä¸ºä¸çŸ¥é“è‘«èŠ¦é‡Œå–çš„ä»€ä¹ˆè¯ï¼Œçœ‹ä¸æ‡‚ã€ä¸ä¼šç”¨ã€‚ å› æ­¤ï¼Œæœ¬æ–‡çš„åˆè¡·ç»ä¸æ˜¯ç¿»è¯‘å®˜æ–¹æ–‡æ¡£ã€æ•™å¤§å®¶æ€ä¹ˆç”¨ï¼Œè€Œæ˜¯æ—¨åœ¨å¸®åŠ©å¤§å®¶å¯¹ RxJava æ“ä½œç¬¦ å®Œæˆæ„Ÿæ€§ä¸Šçš„è®¤è¯†ã€‚é‰´äºæœ¬æ¬¡åŸ¹è®­çš„æ•ˆæœè¿˜ä¸é”™ã€åŒäº‹ä»¬å¬äº†éƒ½è¯´å¥½ï¼Œæˆ‘ä¾¿åœ¨ GitHub å¼€æºäº†å…¨å¥—æ“ä½œç¬¦ç¤ºä¾‹ä»£ç ï¼ˆä¸è¦æ…Œï¼Œé“¾æ¥æ–‡æœ«å·²ç»™å‡ºï¼‰ã€‚å¦‚æœä½ åœ¨é˜…è¯»æœ¬æ–‡åè§‰å¾—æç„¶å¤§æ‚Ÿï¼ŒåŸæ¥ RxJava æ“ä½œç¬¦æ˜¯è¿™ä¹ˆå›äº‹ï¼Œé‚£ä¹ˆæˆ‘çš„æ„¿æœ›ä¹Ÿå°±è¾¾åˆ°äº†ã€‚ ç¼–ç¨‹è¯­è¨€åŒ…å«å¤šç§ç¼–ç¨‹èŒƒå¼æˆ‘å¯¹æ“ä½œç¬¦æœ¬è´¨çš„é¡¿æ‚Ÿï¼Œå§‹äºæˆ‘å¯¹ç¼–ç¨‹è¯­è¨€çš„ç†è§£ã€‚å’Œä½ ä¸€æ ·ï¼Œæˆ‘æ˜¯åšå®‰å“å¼€å‘ï¼Œä½†æœ‰ä¸€å¤©ï¼Œæˆ‘å†³å®šè·³å‡º Javaï¼Œä»æ•´ä¸ªè®¡ç®—æœºç§‘å­¦çš„è§’åº¦æ¥å­¦ä¹ å’Œç†è§£ç¼–ç¨‹è¯­è¨€çš„æœ¬è´¨ï¼Œåœ¨è¿™è¿‡ç¨‹ä¸­ï¼Œæˆ‘æ¥è§¦äº†â€œç¼–ç¨‹èŒƒå¼â€è¿™ä¸ªæ¦‚å¿µï¼Œäº†è§£åˆ°åŸæ¥æ¯ä¸ªç¼–ç¨‹è¯­è¨€å¤§éƒ½åŒ…å«å¤šç§ç¼–ç¨‹èŒƒå¼ã€‚ å¸¸è§çš„ç¼–ç¨‹èŒƒå¼æœ‰ï¼šå‘½ä»¤å¼ç¼–ç¨‹ã€å£°æ˜å¼ç¼–ç¨‹ç­‰ã€‚ ä»¥ Java ä¸ºä¾‹ï¼Œå’±ä»¬ Java æœ€ä¸»è¦çš„ç¼–ç¨‹èŒƒå¼æ˜¯å‘½ä»¤å¼ç¼–ç¨‹ã€‚å‘½ä»¤å¼ç¼–ç¨‹ å³æŒ‰é¡ºåºæ‰§è¡Œå…·ä½“çš„å‘½ä»¤ï¼Œè¿™äº›å‘½ä»¤ä¸ä»…äº¤å¾…äº†åšä»€ä¹ˆï¼Œè¿˜è¯¦ç»†äº¤å¾…äº†æ¯ä¸€æ­¥æ€ä¹ˆåšã€‚ SQL ä¹Ÿæ˜¯ç§ç¼–ç¨‹è¯­è¨€ï¼Œæ˜¯ä¸€ç§å…¸å‹çš„å£°æ˜å¼ç¼–ç¨‹ã€‚å£°æ˜å¼ç¼–ç¨‹çš„ç‰¹ç‚¹æ˜¯ï¼Œåªäº¤å¾…åšä»€ä¹ˆï¼Œä½†æ— é¡»äº¤å¾…æ€ä¹ˆåšã€‚ æ“ä½œç¬¦çš„æœ¬è´¨æ˜¯å£°æ˜å¼ç¼–ç¨‹ä¸‹é¢å›åˆ°æˆ‘ä»¬æœ€åˆçš„é—®é¢˜ä¸Šæ¥ã€‚ä½ ä¹‹æ‰€ä»¥ç”¨ä¸æƒ¯ RxJava æ“ä½œç¬¦ï¼Œæ˜¯å› ä¸ºä½ ä¹ æƒ¯æ€§åœ°ä½¿ç”¨å‘½ä»¤å¼ç¼–ç¨‹æ€ç»´ æ¥ç†è§£å®é™…ä¸Šæ˜¯å£°æ˜å¼ç¼–ç¨‹çš„æ“ä½œç¬¦ã€‚å­¦ä¹ æ“ä½œç¬¦ï¼Œå°±å’Œä½ åœ¨å¤§å­¦é‡Œæ¥å—çš„ SQL è¯­å¥ä¸€æ ·ç†æ‰€å½“ç„¶ã€‚ SQL ä½ æ˜¯ç†è§£çš„ï¼Œå°±æ˜¯æŒ‰ä¸€å®šçš„è§„åˆ™ï¼Œå‘æ•°æ®åº“ä¸­çš„æ•°æ®å£°æ˜ä½ è¦åšä»€ä¹ˆã€‚ åŒç†ï¼ŒRxJava ä¹Ÿæ˜¯æŒ‰ä¸€å®šçš„è§„åˆ™ï¼Œå‘æ•°æ®æµå£°æ˜ä½ è¦åšä»€ä¹ˆã€‚ è½¬æ¢æˆä»£ç ï¼Œä¾¿æˆä¸ºä»¥ä¸‹è¿™æ ·ã€‚ 1234Observable.just(1, 3, 5, 7, 9) .map(i -&gt; i + 1) .filter(i -&gt; i &lt; 5) .subscribe(getObserve()); è¿™æ ·è¯´ï¼Œä½ ç†è§£äº†å—ï¼Ÿ å…¨å¥—æ“ä½œç¬¦ç¤ºä¾‹ä»£ç https://github.com/KunMinX/RxJava2-Operators-Sample","link":"/2019/04/18/ä½ ç”¨ä¸æƒ¯ RxJavaï¼Œåªå› ç¼ºäº†è¿™æŠŠé’¥åŒ™/"},{"title":"è¿™æ ·ç†è§£ï¼Œä½ ä¹Ÿèƒ½åœ¨ 30 ç§’å†…è®²æ˜ç™½ TCP ä¸‰æ¬¡æ¡æ‰‹","text":"å‰è¨€æŸå››å¹´ç»éªŒçš„åŒäº‹ï¼Œå»ä¸€å®¶åŒ…æ‹¬è€æ¿åœ¨å†…æ€»äººæ•°åªæœ‰ 13 äººçš„åˆ›ä¸šå›¢é˜Ÿï¼Œé¢è¯•ä¸€ä»½ ç§»åŠ¨ç«¯æŠ€æœ¯ç»ç† çš„èŒä½ã€‚å¼€å§‹èŠå¾—è¿˜æŒºå¥½çš„ï¼Œæ¶‰åŠçš„ä¸å¤–ä¹ä½•æ—¶ä½•åœ°é¡¹ç›®ä¸Šè§£å†³äº†å“ªäº›ç”¨æˆ·ç—›ç‚¹ã€å¼€å‘è¿‡ç¨‹ä¸­é‡åˆ°è¿‡å“ªäº›é—®é¢˜ã€æ€ä¹ˆçœ‹å¾…å’Œè¯Šæ–­é‡åˆ°è¿‡çš„é—®é¢˜ã€æœ‰æ²¡æœ‰ä¸šä½™çš„å¼€æºé¡¹ç›®ç­‰ç­‰ã€‚ æ¯•ç«Ÿå››å¹´è€æ‰‹ï¼Œé¢è¯•å‰ä¹Ÿæœ‰äº›å‡†å¤‡ï¼Œè½»æ¾åœ°å°±ç­”å¤äº†å‰é¢è¿™äº›ç–‘é—®ï¼Œåªæ˜¯æ²¡æƒ³åˆ°ï¼Œé¢è¯•å®˜æœ€åæŠ›å‡ºè¿™æ ·ä¸€ä¸ªé—®é¢˜ï¼ŒæŠŠåŒäº‹ç»™éš¾ä½äº†ï¼šå¦‚ä½•ç”¨ 30 ç§’ç»™æ–°æ‰‹è®²æ˜ç™½ TCP ä¸‰æ¬¡æ¡æ‰‹ï¼Ÿ æŠ€æœ¯ç»ç†çš„èŒè´£æ˜¯è§£å†³è®¤çŸ¥å›°æ‰°æŠ€æœ¯ç»ç†ä¸åŒäºåˆšæ¯•ä¸šä¸€ä¸¤å¹´çš„å·¥ç¨‹å¸ˆï¼Œä¹Ÿä¸èƒ½å’Œâ€œä¸»ç¨‹â€åŒæ—¥è€Œè¯­ã€‚æŠ€æœ¯ç»ç†çš„èŒè´£æ˜¯ï¼Œâ€œä¸ºå›¢é˜Ÿæˆå‘˜æŒ‡æ˜æ­£ç¡®çš„æ–¹å‘ã€ç”¨æœ€å°çš„ä»£ä»·å¸®åŠ©å›¢é˜Ÿå¿«é€Ÿæˆé•¿â€ã€‚ è¿™å¥è¯çœ‹ä¼¼éš¾ç†è§£ï¼Œå…¶å®å½’æ ¹ç»“åº•æ˜¯æŒ‡ï¼ŒæŠ€æœ¯ç»ç†çš„é¦–è¦å·¥ä½œæ˜¯è§£å†³å›¢é˜Ÿæˆå‘˜çš„è®¤çŸ¥å›°æ‰°ï¼ŒåŒ…æ‹¬åœ¨é‡åˆ°ç ”å‘é—®é¢˜æ—¶ï¼Œèƒ½ç»“åˆ èƒŒæ™¯çŸ¥è¯† è½»æ¾å®šä½åˆ°é—®é¢˜çš„å®è´¨ï¼Œä»¥åŠé¢å¯¹æ–°æŠ€æœ¯å’Œé™Œç”Ÿé¢†åŸŸæ—¶ï¼Œèƒ½å¤Ÿç»“åˆèƒŒæ™¯çŸ¥è¯†è¿…é€Ÿå½’ç±»å’Œæ·±å…¥æµ…å‡ºåœ°ç»™æ–°æ‰‹è®²æ˜æŠ€æœ¯çš„æ¥ç”±ã€‚ ä½ çš„é­é‡ï¼Œä¹Ÿæ˜¯å…±åŒæ™®éçš„é­é‡æ¢è¨€ä¹‹ï¼Œå¦‚æœäº¤å¾…ä»»åŠ¡æ—¶ï¼Œä¸Šå¸åªä¼šâ€œç»™ä¸ªçœ¼ç¥ä½ è‡ªå·±ä½“ä¼šâ€ï¼Œ æˆ–æ˜¯é‡åˆ°é—®é¢˜æ—¶ï¼Œä¸€è¨€ä¸åˆå°±å‘è½¦ã€æ‰‹æŠŠæ‰‹å¸¦ä½ æ€ä¹ˆåšã€ç•™ä¸‹ä¸€æ—è§‚çœ‹çš„ä½ ä¸€è„¸æ‡µé€¼ï¼Œè€Œä¸æ˜¯é¦–å…ˆä½¿ç”¨ç®€ç»ƒçš„è¯­è¨€å°†äº‹æƒ…çš„ç¼˜ç”±è®²æ˜ç™½ã€ç„¶åå¼•å¯¼ä½ ã€é¼“åŠ±ä½ è‡ªå·±å»å®Œæˆï¼Œé‚£è¿™æ ·çš„ç›¸å¤„åŠ¿å¿…ä¼šè®©ä½ æ„Ÿåˆ°è‡ªå·±å¾ˆç¬¨å¾ˆå›§ã€‚ ç„¶è€Œï¼Œäº‹æƒ…å˜æˆè¿™æ ·ï¼Œå¹¶ä¸å…¨æ˜¯ä½ çš„é”™ï¼Œä½ æ¯å¤©éƒ½è¦é¡¶ç€å‹åŠ›ã€å¿™ç€å®Œæˆæ¬ç –çš„ä»»åŠ¡ï¼Œæ·±åº¦æ€è€ƒçš„æ—¶é—´è‡ªç„¶å°±å°‘ã€‚ä¸æ­¤åŒæ—¶ï¼Œä¸Šå¸è‹¥æ˜¯æ²¡èƒ½å¤Ÿå±¥è¡Œè‡ªå·±çš„èŒè´£ï¼Œè€Œåªæ˜¯ç»éªŒä¸Šååˆ†å¨´ç†Ÿï¼Œé‚£ä»–æ˜¯æ— æ³•çœŸæ­£å¸®ä½ æ‹¨å¼€è¿·é›¾ã€å¸¦ä½ å¿«é€Ÿæˆé•¿çš„ã€‚ ä¸‹é¢å›åˆ°æœ€åˆçš„é‚£ä¸ªé—®é¢˜ï¼š å¦‚ä½•ç”¨ 30 ç§’ç»™æ–°æ‰‹è®²æ˜ç™½ TCP ä¸‰æ¬¡æ¡æ‰‹ï¼Ÿé¦–å…ˆï¼Œç»ä¸å¯èƒ½å¼•ç”¨æŸäº›ä¹¦ç±æˆ–æŸç™¾ç§‘çš„è¯´è¾ã€‚æœ¬æ¥æ–°æ‰‹å°±å·²ç»è¶³å¤Ÿè¿·æƒ‘äº†ï¼Œç»“æœè¿™äº›â€œæƒå¨â€åå€’ä¹æ­¤ä¸ç–²åœ°ä»‹ç»è¡¨è±¡ã€ä»‹ç»æ€ä¹ˆåšï¼Œä¸€è¨€ä¸åˆå°± ACK=j+1ã€SYN+ACKï¼Œè€Œç»å£ä¸æäº‹æƒ…çš„æœ¬è´¨ã€ç°è±¡äº§ç”Ÿçš„ç¼˜ç”±ã€‚ æ€»ä¹‹å¬ä¸æ‡‚éƒ½æ€ªæ–°æ‰‹è‡ªå·±ï¼Œä»–ä»¬çš„ä¸–ç•Œè§‚æ˜¯å®Œç¾è€Œæ¯åº¸è´¨ç–‘çš„ã€‚å¦‚æœæ–°æ‰‹å› ä¸ºè¢«è›Šæƒ‘è€Œè¢«è¿«ç›²ä»ï¼Œé‚£æ­£æ˜¯ä»–ä»¬æƒ³çœ‹åˆ°çš„ã€‚æ¯”èµ·ç”¨æŠ€æœ¯æ”¹å–„ç”Ÿæ´»ï¼Œä»–ä»¬æ›´çƒ­è¡·äºæ‹”é«˜é—¨æ§›æˆ–å»ºç«‹ä¸ªäººå®—æ•™ã€‚ å¥½åœ¨è¿™ä½åŒäº‹é™¤äº†ç»éªŒå¨´ç†Ÿï¼Œä¸šä½™æ—¶é—´è¿˜æœ‰å¤ç›˜çš„ä¹ æƒ¯ï¼Œèƒ½å¤ŸæŠ›å¼€â€œæ€ä¹ˆåšâ€çš„è¡¨è±¡ï¼Œå»å®¡è§†ä¸€ä»¶äº‹å®ƒä¹‹æ‰€ä»¥å­˜åœ¨ï¼Œåˆ°åº•â€œæ˜¯ä»€ä¹ˆâ€ã€â€œä¸ºä»€ä¹ˆâ€ã€‚å› æ­¤ï¼Œå€Ÿæ­¤æœºä¼šæˆ‘ä»¬å’Œè¿™ä½åŒäº‹ä¸€èµ·æ¥å®¡è§†ä¸€ä¸‹ï¼Œä¸‰æ¬¡æ¡æ‰‹çš„æœ¬è´¨åˆ°åº•æ˜¯ä»€ä¹ˆï¼Ÿå¼•å‘å®ƒè¿™ä¹ˆåšçš„èƒŒæ™¯åˆæ˜¯ä»€ä¹ˆï¼Ÿ ä¸‰æ¬¡æ¡æ‰‹çš„èƒŒæ™¯æ˜¯é€šä¿¡åŒæ–¹â€œäººåœ¨å®¶ä¸­åâ€å¦‚ä½ æ‰€çŸ¥ï¼Œé€šä¿¡è®¾å¤‡ä¹‹æ‰€ä»¥å­˜åœ¨ï¼Œæ˜¯å› ä¸ºæœ‰â€œè¿œè·ç¦»é€šä¿¡â€çš„éœ€è¦ï¼Œå¦åˆ™ä½ å°±ç«™åœ¨æˆ‘é¢å‰ï¼Œæˆ‘ä½•é¡»å¯¹ç€ä½ è®²ç”µè¯å‘¢ï¼Ÿæ—¢ç„¶æˆ‘ä¸é€šä¿¡çš„å¦ä¸€æ–¹æœ‰ä¸€å®šçš„ç‰©ç†è·ç¦»ï¼Œå¹¶ä¸”æ—¢ç„¶æˆ‘é€‰æ‹©ä½¿ç”¨é€šä¿¡è®¾æ–½ï¼Œé‚£æˆ‘å°±ä¸å¯èƒ½ äº²è‡ªæŠ¤é€ä¿¡æ¯åˆ°å¯¹æ–¹é¢å‰ï¼Œæˆ‘å’Œå¯¹æ–¹éƒ½éœ€è¦ åŸåœ°ä¸åŠ¨åœ°äº¤ç”±ç¬¬ä¸‰æ–¹é€ä¿¡ä½¿è€…æ¥å¸®åŠ©æˆ‘ä»¬æ¥å›ä¼ é€’ä¿¡æ¯ã€‚ å› æ­¤ï¼Œåœ¨ç›¸äº’å¯„é€çœŸæ­£çš„ä¿¡ç‰©ä¹‹å‰ï¼Œæˆ‘ä»¬éœ€è¦é¦–å…ˆç¡®è®¤åŒæ–¹æ”¶å‘ä¿¡ä»¶çš„èƒ½åŠ›æ˜¯å¦æ­£å¸¸ï¼Œå¦åˆ™æˆ‘å¯„å‡ºä¿¡ç‰©ï¼Œè·¯ä¸Šé­é‡è½¦ç¥¸ï¼Œæˆ–å¯¹æ–¹å·²æ¬å®¶ï¼Œé‚£ä¹ˆæˆ‘ä»¬ä¾¿æ— æ³•å®ç°å½¼æ­¤çš„é€šä¿¡ã€‚å¹¶ä¸”å‰é¢ä¹Ÿè¯´äº†ï¼Œâ€œäººåœ¨å®¶ä¸­åï¼Œä¸å¯äº²è‡ªæ¥â€ï¼Œæˆ‘å’Œå¯¹æ–¹å„è‡ªååœ¨å®¶é‡Œï¼Œæ€ä¹ˆæ‰èƒ½çŸ¥é“å½¼æ­¤ä¹‹é—´èƒ½å¤Ÿæ­£å¸¸æ”¶å‘ä¿¡ä»¶å‘¢ï¼Ÿ æ­£æ˜¯åŸºäºä¸Šè¿°çš„èƒŒæ™¯ï¼Œæˆ‘ä»¬çš„å‰è¾ˆå‘æ˜äº†ä¸‰æ¬¡æ¡æ‰‹ â€”â€” ç”¨äºâ€œç¡®è®¤é€šä¿¡åŒæ–¹æ”¶å‘æ•°æ®èƒ½åŠ›â€çš„è§£å†³æ–¹æ¡ˆã€‚ ä¸‰æ¬¡æ¡æ‰‹çš„æœ¬è´¨æ˜¯ç¡®è®¤é€šä¿¡åŒæ–¹æ”¶å‘æ•°æ®çš„èƒ½åŠ›é¦–å…ˆï¼Œæˆ‘è®©ä¿¡ä½¿è¿è¾“ä¸€ä»½ä¿¡ä»¶ç»™å¯¹æ–¹ï¼Œå¯¹æ–¹æ”¶åˆ°äº†ï¼Œé‚£ä¹ˆä»–å°±çŸ¥é“äº†æˆ‘çš„å‘ä»¶èƒ½åŠ›å’Œä»–çš„æ”¶ä»¶èƒ½åŠ›æ˜¯å¯ä»¥çš„ã€‚ äºæ˜¯ä»–ç»™æˆ‘å›ä¿¡ï¼Œæˆ‘è‹¥æ”¶åˆ°äº†ï¼Œæˆ‘ä¾¿çŸ¥æˆ‘çš„å‘ä»¶èƒ½åŠ›å’Œä»–çš„æ”¶ä»¶èƒ½åŠ›æ˜¯å¯ä»¥çš„ï¼Œå¹¶ä¸”ä»–çš„å‘ä»¶èƒ½åŠ›å’Œæˆ‘çš„æ”¶ä»¶èƒ½åŠ›æ˜¯å¯ä»¥ã€‚ ç„¶è€Œæ­¤æ—¶ä»–è¿˜ä¸çŸ¥é“ä»–çš„å‘ä»¶èƒ½åŠ›å’Œæˆ‘çš„æ”¶ä»¶èƒ½åŠ›åˆ°åº•å¯ä¸å¯ä»¥ï¼Œäºæ˜¯æˆ‘æœ€åå›é¦ˆä¸€æ¬¡ï¼Œä»–è‹¥æ”¶åˆ°äº†ï¼Œä»–ä¾¿æ¸…æ¥šäº†ä»–çš„å‘ä»¶èƒ½åŠ›å’Œæˆ‘çš„æ”¶ä»¶èƒ½åŠ›æ˜¯å¯ä»¥çš„ã€‚ è¿™ï¼Œå°±æ˜¯ä¸‰æ¬¡æ¡æ‰‹ï¼Œè¿™æ ·è¯´ï¼Œä½ ç†è§£äº†å—ï¼Ÿ å…¨æ–‡å®Œ","link":"/2019/04/25/è¿™æ ·ç†è§£ï¼Œä½ ä¹Ÿèƒ½åœ¨ 30 ç§’å†…è®²æ˜ç™½ TCP ä¸‰æ¬¡æ¡æ‰‹/"},{"title":"Androidï¼šå››å¤§æ¶æ„çš„ä¼˜ç¼ºç‚¹ï¼Œä½ çœŸçš„äº†è§£å—ï¼Ÿ","text":"å‰è¨€ä½ å‡†å¤‡å¥½äº†å—ï¼Ÿæœ¬æ¬¡åˆ—è½¦å¼€å¾€ â€œé‡æ„â€ ä¹‹å·…ï¼Œæ—¶é€Ÿ 900km/sã€‚é£å¤ªå¤§å¬ä¸è§ï¼Œä½†æˆ‘å°±æ˜¯å¯ä»¥å¾ˆç®€å•å¾ˆç›´çš„ï¼Œç»™ä½ è®²è¿°äº‹ç‰©æœ¬è´¨å’Œè§£å†³æ–¹æ¡ˆï¼âš¡ é¡¹ç›®å¸¸ç”¨æ¶æ„æ¯”å¯¹ä»¥ä¸‹ï¼Œå¯¹å¸¸è§çš„ MVCã€MVPã€Cleanã€AAC æ¶æ„åšä¸ªæ¯”å¯¹ã€‚ é¦–å…ˆï¼Œä¸€å¼ è¡¨æ ¼å±•ç¤ºå„æ¶æ„çš„ç±»å†—ä½™æƒ…å†µï¼š éœ€æ±‚æ˜¯ï¼Œå†™ä¸‰ä¸ªé¡µé¢ï¼ŒListFragmentã€DetailFragmentã€PreviewFragmentï¼Œæ¯ä¸ªé¡µé¢è‡³å°‘ç”¨åˆ° 3ä¸ª Note ä¸šåŠ¡ã€3ä¸ª User ä¸šåŠ¡ã€‚é—®ï¼šä¸Šè¿°æ¶æ„åˆ†åˆ«éœ€ç¼–å†™å¤šå°‘ç±»ï¼Ÿ æ¶æ„ æ¶‰åŠç±» ç±»æ€»æ•° MVC Fragment:3ä¸ªï¼ŒControllerï¼š3ä¸ªï¼ŒModel:2ä¸ª 8ä¸ª MVP Fragment:3ä¸ªï¼ŒPresenter:3ä¸ªï¼ŒModel:3ä¸ªï¼ŒContract:1ä¸ª 10ä¸ª Clean Fragment:3ä¸ªï¼ŒViewModel:3ä¸ªï¼ŒUsecase:18ä¸ªï¼ŒModel:3ä¸ª 27ä¸ª AAC Fragment:3ä¸ªï¼ŒViewModel:3ä¸ªï¼ŒModel:3ä¸ª 9ä¸ª MVC æ¶æ„çš„ç¼ºé™· Viewã€Controllerã€Model ç›¸äº’ä¾èµ–ï¼Œé€ æˆä»£ç è€¦åˆã€‚ éš¾ä»¥åˆ†å·¥ï¼Œéš¾ä»¥å°† Viewã€Controllerã€Model åˆ†ç»™ä¸åŒçš„äººå†™ã€‚ éš¾ä»¥ç»´æŠ¤ï¼Œæ²¡æœ‰ä¸­é—´ä»¶æ¥å£åšç¼“å†²ï¼Œéš¾ä»¥æ›¿æ¢åº•å±‚çš„å®ç°ã€‚ 1234567891011121314151617181920212223242526272829303132public class NoteListFragment extends BaseFragment { ... public void refreshList() { new Thread(new Runnable() { @Override public void run() { //view ä¸­ç›´æ¥ä¾èµ– modelã€‚é‚£ä¹ˆ view é¡»ç­‰ model ç¼–å†™å¥½æ‰èƒ½å¼€å·¥ã€‚ mNoteList = mDataManager.getNoteList(); mHandler.sendMessage(REFRESH_LIST, mNoteList); } }).start(); } private Handler mHandler = new Handler() { @Override public void handleMessage(Message msg) { switch (msg) { case REFRESH_LIST: mAdapter.setList(mNoteList); mAdapter.notifyDataSetChanged(); break; default: } } }; ...} MVP æ¶æ„çš„ç‰¹ç‚¹ä¸å±€é™ MVP æ¶æ„çš„ç‰¹ç‚¹æ˜¯ é¢å‘æ¥å£ç¼–ç¨‹ã€‚åœ¨ Viewã€Presenterã€Model ä¹‹é—´åˆ†åˆ«ç”¨ ä¸­é—´ä»¶æ¥å£ åšè¡”æ¥ï¼Œå½“æœ‰æ–°çš„åº•å±‚å®ç°æ—¶ï¼Œèƒ½å¤Ÿæ— ç¼æ›¿æ¢ã€‚ æ­¤å¤–ï¼ŒMVP çš„ View å’Œ Model å¹¶ä¸ç›¸äº’ä¾èµ–ï¼Œå› æ­¤å¯ä»¥è¯´æ˜¯å¯¹ View å’Œ Model åšäº†ä»£ç è§£è€¦ã€‚ 1234567891011121314151617181920212223242526272829public class NoteListContract { interface INoteListView { void showDialog(String msg); void showTip(String tip); void refreshList(List&lt;NoteBean&gt; beans); } interface INoteListPresenter { void requestNotes(String type); void updateNotes(NoteBean... beans); void deleteNotes(NoteBean... beans); } interface INoteListModel { List&lt;NoteBean&gt; getNoteList(); int updateNote(NoteBean bean); int deleteNote(NoteBean bean); }} ä½† MVP æ¶æ„æœ‰å…¶å±€é™æ€§ã€‚æŒ‰æˆ‘çš„ç†è§£ï¼ŒMVP è®¾è®¡çš„åˆè¡·æ˜¯ï¼Œâ€œè®©å¤©ä¸‹æ²¡æœ‰éš¾æ›¿æ¢çš„ View å’Œ Modelâ€ ã€‚è¯¥åˆè¡·èƒŒåæ‰€åŸºäºçš„å‡è®¾æ˜¯ï¼Œâ€œä¸Šå±‚é€»è¾‘ç¨³å®šï¼Œä½†åº•å±‚å®ç°æ›´æ›¿é¢‘ç¹â€ ã€‚åœ¨è¿™ä¸ªå‡è®¾çš„å¼•å¯¼ä¸‹ï¼ŒPresenter é™¤äº†æ‰¿æ‹…ä¸šåŠ¡é€»è¾‘çš„è´£ä»»ï¼Œè¿˜è¶Šç•Œæ¥ç®¡äº† UIé€»è¾‘ï¼Œè¿™ä½¿å¾— UI å’Œ ä¸šåŠ¡å‘ç”Ÿäº†è€¦åˆã€‚ å¦‚æ­¤ï¼Œä¸€æ—¦ UI éœ€æ±‚å˜åŒ–ï¼ŒUI å’Œ ä¸šåŠ¡çš„ç¼–å†™è€…éƒ½ä¼šå—åˆ°ç‰µè¿ï¼Œå æ® 2 ä»½ç”šè‡³æ›´å¤šå·¥æ—¶ã€‚ ä¸”ç”±äº UI ç¼–å†™è€…çš„â€œæƒåŠ›ä¸Šç¼´â€ï¼Œä½¿å¾—åœ¨ UI ç¼–å†™å®Œæˆå æ— æ³•ç‹¬ç«‹å®Œæˆå•å…ƒæµ‹è¯•ã€‚ï¼ˆå› ä¸ºæ­¤å¤„ç¼ºå°‘äº† UI é€»è¾‘ â€”â€” æ€»ä¸èƒ½ä¸ºäº†æµ‹è¯•ï¼Œè€ŒèƒŒç€ Presenter è‡ªå·±å¦å¤–å†™ä¸€æ³¢å§ã€‚æ‰€ä»¥é™¤äº†é‚£ç§â€œä¸Šå±‚é€»è¾‘ç¨³å®šâ€çš„ç»„ä»¶ï¼Œæ— è®ºä»å“ªä¸ªè§’åº¦æ¥çœ‹ï¼Œç”¨ MVP æ¥æ¶æ„é¡¹ç›®ï¼Œéƒ½æ˜¯ä¸åˆé€‚çš„ï¼‰ 123456789101112131415161718192021222324252627282930public class NoteListPresenter implements NoteListContract.INoteListPresenter { private NoteListContract.INoteListModel mDataManager; private NoteListContract.INoteListView mView; @Override public void requestNotes(String type) { Observable.create(new ObservableOnSubscribe&lt;List&lt;NoteBean&gt;&gt;() { @Override public void subscribe(ObservableEmitter&lt;List&lt;NoteBean&gt;&gt; e) throws Exception { List&lt;NoteBean&gt; noteBeans = mDataManager.getNoteList(); e.onNext(noteBeans); } }).subscribeOn(Schedulers.io()).observeOn(AndroidSchedulers.mainThread()) .subscribe(new Consumer&lt;List&lt;NoteBean&gt;&gt;() { @Override public void accept(List&lt;NoteBean&gt; beans) throws Exception { //presenter ç›´æ¥å¹²é¢„äº† UI åœ¨æ‹¿åˆ°æ•°æ®ååšä»€ä¹ˆï¼Œä½¿å¾—èŒè´£ä¸Šæ²¡æœ‰å‘ç”Ÿè§£è€¦ã€‚ //æ­£å¸¸æ¥è¯´ï¼Œè§£è€¦æ„å‘³ç€ï¼Œpresenter çš„èŒèƒ½è¾¹ç•Œä»…é™è¿”å›ç»“æœæ•°æ®ï¼Œ //ç”± UI æ¥ä¾æ®å“åº”ç å¤„ç† UI é€»è¾‘ã€‚ mView.refreshList(beans); } }); } ...} Clean æ¶æ„çš„ç‰¹ç‚¹å’Œä¸è¶³ ä¸ºè§£å†³ Presenter èŒèƒ½è¾¹ç•Œä¸æ˜ç¡® çš„é—®é¢˜ï¼Œåœ¨ Clean æ¶æ„ä¸­ï¼Œä¸šåŠ¡é€»è¾‘çš„èŒèƒ½è¢«è½¬ç§»åˆ°é¢†åŸŸå±‚ï¼Œç”± Usecase ä¸“èŒç®¡ç†ã€‚Presenter åˆ™å¼±åŒ–ä¸º ViewModel ï¼Œä½œä¸ºä»£ç†æ•°æ®è¯·æ±‚ï¼Œå’Œè¡”æ¥æ•°æ®å›è°ƒçš„ç¼“å†²åŒºã€‚ Clean æ¶æ„çš„ç‰¹ç‚¹æ˜¯ å•å‘ä¾èµ–ã€æ•°æ®é©±åŠ¨ç¼–ç¨‹ã€‚ View -&gt; ViewModel -&gt; Usecase -&gt; Model ã€‚ View å¯¹ ViewModel çš„å•å‘ä¾èµ–ï¼Œæ˜¯é€šè¿‡ DataBinding ç‰¹æ€§å®ç°çš„ã€‚ViewModel åªè´Ÿè´£ä»£ç†æ•°æ®è¯·æ±‚ï¼Œåœ¨ Usecase å¤„ç†å®Œä¸šåŠ¡è¿”å›ç»“æœæ•°æ®æ—¶ï¼Œç»“æœæ•°æ®è¢«èµ‹å€¼ç»™å¯è§‚å¯Ÿçš„ DataBinding æ•°æ®ï¼Œè€Œ View åˆ™ä¾æ®æ•°æ®çš„å˜åŒ–è€Œå˜åŒ–ã€‚ 1234567891011121314151617181920212223242526272829public class NoteListViewModel { private ObservableList&lt;NoteBean&gt; mListObservable = new ObservableArrayList&lt;&gt;(); private void requestNotes(String type) { if (null == mRequestNotesUsecase) { mRequestNotesUsecase = new ProveListInitUseCase(); } mUseCaseHandler.execute(mRequestNotesUsecase, new RequestNotesUsecase.RequestValues(type), new UseCase.UseCaseCallback&lt;RequestNotesUsecase.ResponseValue&gt;() { @Override public void onSuccess(RequestNotesUsecase.ResponseValue response) { //viewModel çš„å¯è§‚å¯Ÿæ•°æ®å‘ç”Ÿå˜åŒ–åï¼Œdatabinding ä¼šè‡ªåŠ¨æ›´æ–° UI å±•ç¤ºã€‚ mListObservable.clear(); mListObservable.addAll(response.getNotes()); } @Override public void onError() { } }); } ...} ä½† Clean æ¶æ„ä¹Ÿæœ‰ä¸è¶³ï¼šç²’åº¦å¤ªç»† ã€‚ä¸€ä¸ª UseCase å—é™äºè¯·æ±‚å‚æ•°ï¼Œå› è€Œåªèƒ½å¤„ç†ä¸€ç±»è¯·æ±‚ã€‚View è¯·æ±‚çš„æ•°æ®åŒ…å«å‡ ç§ç±»å‹ï¼Œå°±è‡³å°‘éœ€è¦å‡†å¤‡å‡ ä¸ª UseCase ã€‚UseCase æ˜¯ä¾æ®å½“å‰ View å¯¹æ•°æ®çš„éœ€æ±‚é‡èº«å®šåˆ¶çš„ï¼Œå› æ­¤ UseCase çš„å¤ç”¨ç‡æä½ï¼Œé¡¹ç›®ä¼šå› è€Œæ€¥å‰§çš„å¢åŠ ç±»å’Œé‡å¤ä»£ç ã€‚ 12345678910111213141516171819202122232425262728293031323334public class RequestNotesUseCase extends UseCase&lt;RequestNotesUseCase.RequestValues, RequestNotesUseCase.ResponseValue&gt; { private DataManager mDataManager; @Override protected void executeUseCase(final RequestValues values) { List&lt;NoteBean&gt; noteBeans = mDataManager.getNotes(); ... getUseCaseCallback().onSuccess(new RequestNotesUseCase.ResponseValue(noteBeans)); } //æ¯æ–°å»ºä¸€ä¸ª UseCase ç±»ï¼Œéƒ½éœ€è¦æ‰‹åŠ¨ä¸ºå…¶é…ç½® è¯·æ±‚å‚æ•°åˆ—è¡¨ å’Œ å“åº”å‚æ•°åˆ—è¡¨ã€‚ public static final class RequestValues implements UseCase.RequestValues { private String type; public String getType() { return type; } public void setType(String type) { this.type = type; } } public static final class ResponseValue implements UseCase.ResponseValue { public List&lt;NoteBean&gt; mBeans; public ResponseValue(List&lt;NoteBean&gt; beans) { mBeans = beans; } }} AAC æ¶æ„çš„ç‰¹ç‚¹AAC ä¹Ÿæ˜¯æ•°æ®é©±åŠ¨ç¼–ç¨‹ã€‚åªä¸è¿‡å®ƒä¸ä¾èµ–äº MVVM ç‰¹æ€§ï¼Œè€Œæ˜¯ç›´æ¥åœ¨ View ä¸­å†™ä¸ªè§‚å¯Ÿè€…å›è°ƒï¼Œä»¥æ¥æ”¶ç»“æœæ•°æ®å¹¶å¤„ç† UI é€»è¾‘ã€‚ 123456789101112131415public class NoteListFragment extends BaseFragment { @Override public void onActivityCreated(@Nullable Bundle savedInstanceState) { super.onActivityCreated(savedInstanceState); viewModel.getNote().observe(this, new Observer&lt;NoteBean&gt;() { @Override public void onChanged(@Nullable NoteBean bean) { //update UI } }); } ...} ä½ å®Œå…¨å¯ä»¥å°†å…¶ç†è§£ä¸º B/S æ¶æ„ï¼šç”± Web å‰ç«¯å‘ Web åç«¯å‘é€äº†æ•°æ®è¯·æ±‚ï¼Œåç«¯åœ¨å¤„ç†å®Œæ¯•åå“åº”ç»“æœæ•°æ®ç»™å‰ç«¯ï¼Œå‰ç«¯å†ä¾æ®éœ€æ±‚å¤„ç† UI é€»è¾‘ã€‚ç­‰äºè¯´ï¼Œ AAC å°†ä¸šåŠ¡å®Œå…¨å‹åˆ°äº† â€œæ•°æ®ä»“åº“å±‚â€ã€‚ æŸâ€œè§£è€¦åˆ†ç¦»â€æ¶æ„çš„ç”±æ¥åŠç‰¹ç‚¹å…¬å¸é¡¹ç›®çš„ç¬¬ä¸‰è½®é‡æ„é‡‡ç”¨çš„æ˜¯ Clean æ¶æ„ï¼Œè€Œæˆ‘åœ¨ä¸šä½™æ—¶é—´åˆè®¾è®¡äº†ä¸€æ¬¾â€œå®ç° UI å’Œä¸šåŠ¡åˆ†ç¦»â€çš„æŸæ¶æ„ï¼Œäºæ˜¯å‘ä¸»ç®¡ç”³è¯·äº† 1 å‘¨æ—¶é—´ï¼Œåˆ©ç”¨â€œæŸæ¶æ„â€å°† 60 ä¸ªç±»çš„æ ¸å¿ƒæ¨¡å—é‡æ„äº†ä¸€éã€‚ï¼ˆä¸è¦æ…Œï¼Œè¯¥æ¶æ„å·²å¼€æºï¼Œæ–‡æœ«é“¾æ¥ç»™å‡ºï¼‰ã€‚ è¯¥æ¶æ„å±äºâ€œæ¶ˆæ¯é©±åŠ¨ç¼–ç¨‹â€ï¼Œå³å€ŸåŠ©â€œæ€»çº¿â€æ¥è½¬å‘æ•°æ®çš„è¯·æ±‚å’Œå“åº”ï¼Œå®ç° UI å’Œ ä¸šåŠ¡çš„åˆ†ç¦»ã€‚ ä¸åŒäºä»¥å¾€çš„æ¶æ„ï¼Œè¯¥æ¶æ„æ˜ç¡®ç•Œå®šäº†ä»€ä¹ˆæ˜¯ UIï¼Œä»€ä¹ˆæ˜¯ä¸šåŠ¡ã€‚ UI çš„ä½œç”¨æ˜¯è§†è§‰äº¤äº’ï¼ŒUI çš„èŒè´£èŒƒå›´ä»…é™äºè¯·æ±‚æ•°æ®å’Œå¤„ç† UI é€»è¾‘ ã€‚ä¸šåŠ¡çš„ä½œç”¨æ˜¯ä¾›åº”æ•°æ®ï¼Œä¸šåŠ¡çš„èŒè´£èŒƒå›´ä»…é™äºæ¥æ”¶è¯·æ±‚ã€å¤„ç†æ•°æ®ã€è¿”å›ç»“æœæ•°æ® ã€‚ ä½ çœ‹ï¼Œå°±åƒå‰åç«¯åˆ†ç¦»ä¸€æ ·ï¼ŒUI å’Œä¸šåŠ¡ï¼Œå¯ä»¥åˆ†åˆ«äº¤ç”±ä¸åŒçš„äººåˆ†å·¥åˆä½œï¼š 1.ç‹¬ç«‹è‡ªä¸»ã€‚ è°å…ˆå®Œæˆäº†ï¼Œå°±å¯ä»¥å…ˆç‹¬ç«‹çš„å•å…ƒæµ‹è¯•ä¸€æŠŠã€‚ 2.å¯æŒç»­å‘å±•ã€‚ ç”±äºç›¸äº’ç‹¬ç«‹ï¼Œäººä»¬å¯ä»¥åœ¨å„è‡ªçš„é¢†åŸŸé‡Œæ·±è€•ã€‚æ¯”å¦‚å†™ä¸šåŠ¡çš„äººï¼š ç¬¬ä¸€è½®ï¼Œä»–å¯ä»¥ç®€å•çš„å†™å†™ä¸šåŠ¡ï¼Œç›®æ ‡æ˜¯æŠŠæ•°æ®ç»™åˆ°ä½ã€‚ ç¬¬äºŒè½®ï¼Œä»–å¯ä»¥è€ƒè™‘æ”¹è¿›ä¸šåŠ¡é€»è¾‘ã€æ”¹è¿›ç®—æ³•å’Œæ•°æ®ç»“æ„ï¼Œä¸ä»…å°†æ•°æ®ç»™åˆ°ä½ï¼Œè¿˜ä¼˜åŒ–äº†æ€§èƒ½ã€‚ ç¬¬ä¸‰è½®ï¼Œä»–å¯ä»¥è€ƒè™‘å®‰å…¨æ€§ï¼Œå°†ä¸šåŠ¡é€»è¾‘å…¨éƒ¨å†™è¿› C å±‚ï¼Œè¿™æ ·åç¼–è¯‘åé™¤äº† findViewByIdï¼Œå•¥ if else ä¹Ÿçœ‹ä¸è§ï¼Œæ›´åˆ«è¯´ç¯¡æ”¹å’Œç ´è§£äº†ã€‚ ä½ çœ‹ï¼Œè§£è€¦åˆ†ç¦»åï¼Œè¦æƒ³è¿­ä»£å’Œå‘å±•ï¼Œå°±æ˜¯è¿™ä¹ˆè½»æ¾ç•…å¿«ã€‚è¿™è¦æ˜¯æ”¾åˆ°ä»£ç è€¦åˆçš„é¡¹ç›®ä¸­ï¼Œæ˜¯æ€ä¹ˆä¹Ÿä¸æ•¢æƒ³ã€‚ æ€»ç»“ç»¼ä¸Šï¼Œæœ¬æ–‡ä»‹ç»äº† 4 ä¸ªæ¶æ„ä»¥åŠå®ƒä»¬çš„ä¼˜ç¼ºç‚¹ã€‚åœ¨å®é™…é¡¹ç›®å¼€å‘ä¸­ï¼Œå¯æ ¹æ®é¡¹ç›®è§„æ¨¡çš„å¤§å°ã€é¡¹ç›®ä¸Šå±‚é€»è¾‘çš„ç¨³å®šç¨‹åº¦ï¼Œæ¥é€‰æ‹©æœ€åˆé€‚çš„æ¶æ„ã€‚ çœ‹å®Œè¿™ç¯‡æ–‡ç« ï¼Œå¦‚ä½ è§‰å¾—æœ‰æ‰€æ”¶è·å’Œå¯å‘ï¼Œè¯·ä¸åç‚¹èµï¼Œä½ çš„ç‚¹èµå°±æ˜¯å¯¹æˆ‘æœ€å¤§çš„æ”¯æŒï¼ æ›´å¤šè®¿é—®1åˆ†é’ŸæŒæ¡ ViaBus æ¶æ„çš„ä½¿ç”¨Viabus - å¹´è½»äººçš„ç¬¬ä¸€æ¬¾æ¶æ„Androidï¼šä½ è¿˜åœ¨ç­‰é‚£ä¸ªï¼Œæ‰‹æŠŠæ‰‹å¸¦ä½ é‡æ„çš„äººå‡ºç°å—ï¼Ÿ","link":"/2018/09/25/Androidï¼šå››å¤§æ¶æ„çš„ä¼˜ç¼ºç‚¹ï¼Œä½ çœŸçš„äº†è§£å—ï¼Ÿ/"},{"title":"Androidï¼šä½ è¿˜åœ¨ç­‰é‚£ä¸ªï¼Œæ‰‹æŠŠæ‰‹å¸¦ä½ é‡æ„çš„äººå‡ºç°å—ï¼Ÿ","text":"å‰è¨€é«˜èƒ½é¢„è­¦ï¼šæœ¬æ–‡æœ‰ä¸€ç‚¹é•¿ï¼Œå»ºè®®æ”¶è—åå†çœ‹ã€‚ ä»¥ä¸‹ä½ å°±å¯ä»¥çœ‹åˆ°ï¼Œä¸€ä½å•æªåŒ¹é©¬çš„å¸…å“¥ï¼Œæ˜¯å¦‚ä½•ä»¥ä¸€å·±ä¹‹åŠ›ï¼Œé‡æ„æ•´åº§â€œå±å±±â€çš„ã€‚ è¿™ä½å¸…å“¥ä¸€ç›´åœ¨å¾˜å¾Šï¼Œæœ¬æ–‡åˆ°åº•è¯¥å†™ç»™è°çœ‹ï¼Ÿæ˜¯åªåœ¨ä¹å†™åŠŸèƒ½çš„ç å†œå—ï¼Ÿä¸äº†ä¸äº†ï¼Œç å†œè‹¥çœŸçš„æœ‰å¿ƒæå‡ä»£ç è´¨é‡ï¼Œå°±ä¸ä¼šåœ¨é¡¹ç›®ä¸­ä¸§å¿ƒç—…ç‹‚çš„å †ç§¯å±å±±ã€‚ äºæ˜¯å¹²è„†å†™å†™é‡æ„å¿ƒå¾—ã€åˆ†äº«é‡æ„æ€è·¯ï¼Œè®©é‚£äº›æœ‰æ„è¯†åœ¨è¿™æ–¹é¢æœ‰æ‰€æå‡çš„å¸…å“¥ç¾å¥³ä»¬ï¼Œå°‘èµ°äº›å¼¯è·¯ï¼ åœ¨æ­¤é¦–å…ˆæ„Ÿè°¢ä¸»ç®¡çš„ä¿¡ä»»ä¸æ”¯æŒã€‚æœ¬æ¬¡é‡æ„ä¸­ï¼Œå¸…å“¥åœ¨éƒ¨é—¨å†…éƒ¨å…œå”®å¹¶ç‡å…ˆä½¿ç”¨æŸæ¶æ„ï¼Œ5 å¤©å†…å®Œæˆ 60 ä¸ªç±»çš„æ ¸å¿ƒæ¨¡å—çš„é‡æ„ã€‚ï¼ˆä¸è¦æ…Œï¼Œæ¶æ„å·²åœ¨ GitHub å¼€æºï¼Œæ–‡æœ«é“¾æ¥ç»™å‡ºã€‚ï¼‰ ä»¥ä¸‹æ­£æ–‡ã€‚ ä»£ç æ˜¯å¦‚ä½•è¶Šå†™è¶Šçƒ‚çš„ï¼Ÿä½ æ˜¯å¦ç»å¸¸å¬åŒäº‹è‡ªå˜²ï¼Œâ€œå¼€å§‹è¿˜æƒ³å¥½å¥½å†™ï¼Œä¸çŸ¥æ€æ»´ï¼Œåé¢è¶Šå†™è¶Šçƒ‚â€ï¼Ÿ ä»£ç è¶Šå†™è¶Šçƒ‚ï¼ŒæœçœŸæ˜¯ä¸ªæ²¡æœ‰ç«¯å€ªã€æ— æ³•å¹²é¢„çš„é­”å’’ç„å­¦å—ï¼Ÿ è®©æˆ‘ä»¬æ¥å¿«é€Ÿæµè§ˆä¸€ä¸‹ é‡æ„å‰ é¡¹ç›®é‡Œçš„ä»£ç æ˜¯æ€ä¹ˆå†™çš„ã€‚ 123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869707172737475767778798081828384858687888990919293949596979899100101102103104105106107108109110111112113114115116117118119120121122123124125126127128129130131132133134135136137138139140141142143144145146147148149150151152153154155156157158159160161162163164165166167168169170171172173174175176177178179180181182183184185186187188189190191192193194195196197198199200201202203204205206207208209210211212213214215216217218219220221222223224225226227228229230231232233234235236237238239240241242243244245246247248249250251252253254255256257258259260261262263264265266267268269270271272273274275276277278279280281282283284285286287288289290291292293294295296297298299300301302303304305306307308309310311312313314315316317318319320321322323324325326327328329330331332333334335336337338339340341342343344345346347348349350351352353354355356357358359360361362363364365366367368369370371372373374375376protected void initView() { PagerAdapter pagerAdapter = new PagerAdapter(); viewPagerFix.setOffscreenPageLimit(4); viewPagerFix.setAdapter(pagerAdapter); mFragmentBinding.tabLayout.setTabData(pagerAdapter.titles); mFragmentBinding.tabLayout.setOnTabSelectListener(new OnTabSelectListener() { @Override public void onTabSelect(int position) { viewPagerFix.setCurrentItem(position); } @Override public void onTabReselect(int position) { } }); viewPagerFix.addOnPageChangeListener(new ViewPagerFix.OnPageChangeListener() { @Override public void onPageScrolled(int position, float positionOffset, int positionOffsetPixels) { KeyboardUtils.hideSoftInput(getActivity()); } @Override public void onPageSelected(int position) { mFragmentBinding.tabLayout.setCurrentTab(position); if (mViewModel.getXXXDetailTouchManager().isZZBG()) { zzbgPageSelected(position); } else if (mViewModel.getXXXDetailTouchManager().isYBJZ()) { switch (position) { case 0: case 1: mViewModel.removeAllArrows(); if (mAttachmentFragment != null) { mAttachmentFragment.hideClickHighLight(ALBUM_ALL); } break; case 2: if (mAttachmentFragment != null) { mAttachmentFragment.initAttachTitle(); } mViewModel.showAllArrows(); break; default: break; } } else { switch (position) { case 0: case 1: case 2: mViewModel.removeAllArrows(); //hideBottomLayout(); if (mAttachmentFragment != null) { mAttachmentFragment.hideClickHighLight(ALBUM_ALL); } break; case 3: if (mAttachmentFragment != null) { mAttachmentFragment.initAttachTitle(); } mViewModel.showAllArrows(); break; default: break; } } } @Override public void onPageScrollStateChanged(int state) { } }); viewPagerFix.setCurrentItem(0); mFragmentBinding.headContainer.getTitleView().setOnClickListener(new View.OnClickListener() { @Override public void onClick(View v) { if (mViewModel.getXXXDetailTouchManager().isZZBG()) { return; } mViewModel.changeWyhcrwMajorState(); EventBus.getDefault().post(new RefreshItemEventBus( mViewModel.getXXXDetailTouchManager().getCurrentWyhcrw())); } }); } private void zzbgPageSelected(int position) { if (mScreenNum == 3) { switch (position) { case 0: case 1: mViewModel.removeAllArrows(); if (mAttachmentFragment != null) { mAttachmentFragment.hideClickHighLight(ALBUM_ALL); } break; case 2: mViewModel.showAllArrows(); break; default: break; } } else { switch (position) { case 0: mViewModel.removeAllArrows(); if (mAttachmentFragment != null) { mAttachmentFragment.hideClickHighLight(ALBUM_ALL); } break; case 1: mViewModel.showAllArrows(); break; default: break; } } ; } /** * viewPageré€‚é…å™¨ */ private class PagerAdapter extends FragmentPagerAdapter { String[] titles; PagerAdapter() { super(getChildFragmentManager()); if (mViewModel.getXXXDetailTouchManager().isZZBG()) { if (mScreenNum == 3) { titles = getResources().getStringArray(R.array.XXX_detail_tabs_for_no_tbjt); } else { titles = getResources().getStringArray(R.array.XXX_detail_tabs_for_zzbg); } } else if (mViewModel.getXXXDetailTouchManager().isYBJZ()) { titles = getResources().getStringArray(R.array.XXX_detail_tabs_for_ybjz); } else { titles = getResources().getStringArray(R.array.XXX_detail_tabs); } } @Override public Fragment getItem(int position) { if (mViewModel.getXXXDetailTouchManager().isZZBG()) { return zzbgGetItem(position); } else if (mViewModel.getXXXDetailTouchManager().isYBJZ()) { switch (position) { case 0: if (mXXXTuBanPicFragment == null) { mXXXTuBanPicFragment = XXXTuBanPicFragment.newInstance( mViewModel.getUniqueCode(), mViewModel.getXXXTouchManger() ); } return mXXXTuBanPicFragment; case 1: if (mRecordFragment == null) { mRecordFragment = XXXRecordFragment.newInstance(mViewModel.getXXXDetailTouchManager()); } return mRecordFragment; default: if (mAttachmentFragment == null) { mAttachmentFragment = XXXAttachmentFragment.newInstance( mViewModel.getAttachments(), mViewModel.getOriginalAttachments(), mViewModel.getUniqueCode(), mViewModel.getXXXTouchManger(), XXXDetailFragment.this ); } return mAttachmentFragment; } } else { switch (position) { case 0: if (mXXXTuBanPicFragment == null) { mXXXTuBanPicFragment = XXXTuBanPicFragment.newInstance( mViewModel.getUniqueCode(), mViewModel.getXXXTouchManger() ); } return mXXXTuBanPicFragment; case 1: if (mAttributeFragment == null) { mAttributeFragment = XXXAttributeFragment.newInstance( mViewModel.getUniqueCode(), mViewModel.getXXXTouchManger() ); } return mAttributeFragment; case 2: if (mRecordFragment == null) { mRecordFragment = XXXRecordFragment.newInstance(mViewModel.getXXXDetailTouchManager()); } return mRecordFragment; default: if (mAttachmentFragment == null) { mAttachmentFragment = XXXAttachmentFragment.newInstance( mViewModel.getAttachments(), mViewModel.getOriginalAttachments(), mViewModel.getUniqueCode(), mViewModel.getXXXTouchManger(), XXXDetailFragment.this ); } return mAttachmentFragment; } } } private Fragment zzbgGetItem(int position) { if (mScreenNum == 3) { switch (position) { case 0: if (mAttributeFragment == null) { mAttributeFragment = XXXAttributeFragment.newInstance( mViewModel.getUniqueCode(), mViewModel.getXXXTouchManger() ); } return mAttributeFragment; case 1: if (mRecordFragment == null) { mRecordFragment = XXXRecordFragment.newInstance( mViewModel.getXXXDetailTouchManager()); } return mRecordFragment; default: if (mAttachmentFragment == null) { mAttachmentFragment = XXXAttachmentFragment.newInstance( mViewModel.getAttachments(), mViewModel.getOriginalAttachments(), mViewModel.getUniqueCode(), mViewModel.getXXXTouchManger(), XXXDetailFragment.this ); } return mAttachmentFragment; } } else { switch (position) { case 0: if (mRecordFragment == null) { mRecordFragment = XXXRecordFragment.newInstance( mViewModel.getXXXDetailTouchManager()); } return mRecordFragment; default: if (mAttachmentFragment == null) { mAttachmentFragment = XXXAttachmentFragment.newInstance( mViewModel.getAttachments(), mViewModel.getOriginalAttachments(), mViewModel.getUniqueCode(), mViewModel.getXXXTouchManger(), XXXDetailFragment.this ); } return mAttachmentFragment; } } } @Override public Object instantiateItem(ViewGroup container, int position) { Object object = super.instantiateItem(container, position); if (mViewModel.getXXXDetailTouchManager().isZZBG()) { if (mScreenNum == 3) { switch (position) { case 0: mAttributeFragment = (XXXAttributeFragment) object; break; case 1: mRecordFragment = (XXXRecordFragment) object; break; default: mAttachmentFragment = (XXXAttachmentFragment) object; break; } } else { switch (position) { case 0: mRecordFragment = (XXXRecordFragment) object; break; default: mAttachmentFragment = (XXXAttachmentFragment) object; break; } } return object; } else if (mViewModel.getXXXDetailTouchManager().isYBJZ()) { switch (position) { case 0: mXXXTuBanPicFragment = (XXXTuBanPicFragment) object; break; case 1: mRecordFragment = (XXXRecordFragment) object; break; default: mAttachmentFragment = (XXXAttachmentFragment) object; break; } return object; } else { switch (position) { case 0: mXXXTuBanPicFragment = (XXXTuBanPicFragment) object; break; case 1: mAttributeFragment = (XXXAttributeFragment) object; break; case 2: mRecordFragment = (XXXRecordFragment) object; break; default: mAttachmentFragment = (XXXAttachmentFragment) object; break; } return object; } } @Override public int getCount() { if (mViewModel != null) { if (mViewModel.getXXXDetailTouchManager().isZZBG()) { if (mScreenNum == 3) { return 3; } return 2; } if (mViewModel.getXXXDetailTouchManager().isYBJZ()) { return 3; } else { return 4; } } return 0; } } ï¼ˆä¸ºä¿æŠ¤éšç§ï¼Œæ¨¡å—ç±»åå·²æ›¿æ¢ä¸ºâ€œXXXâ€ï¼‰ å¯ä»¥çœ‹åˆ°ï¼Œè¯¥ä¸»é¡µç›®å‰æœåŠ¡äº 3 ä¸ªåœ°åŒºï¼Œæ¯ä¸ªåœ°åŒºå¯¹å­é¡µé¢çš„å±•ç¤ºéƒ½æœ‰å®šåˆ¶éœ€æ±‚ã€‚ if else switch if else switchï¼Œåªåœ¨ä¹åŠŸèƒ½å®ç°çš„ç å†œå°±æ˜¯è¿™ä¹ˆå†™çš„ã€‚ ä¸€ä¸ªåœ°åŒº 50 è¡Œï¼Œé‚£è¦æ˜¯ 10 ä¸ªåœ°åŒºå‘¢ï¼Ÿå…¬å¸é¢†å¯¼æ”¾è¯è¦æ”¯æŒå…¨å›½ 100 ä¸ªä¹¡é•‡åœ°åŒºï¼é‚£ 100 ä¸ªåœ°åŒºå‘¢ï¼Ÿï¼Ÿï¼Ÿ æŠ½è±¡ï¼Œé¡ºåº”çš„æ˜¯â€œå¼€é—­åŸåˆ™â€è¿™æ˜¯ä¸€å¸®å¯¹â€œæŠ½è±¡â€æ— æ„Ÿçš„ç å†œã€‚ ä»–ä»¬å¬åˆ°â€œæŠ½è±¡â€ï¼Œå°±åƒä¸çˆ±é”»ç‚¼çš„æˆ‘å¬åˆ°çˆ¶æ¯ã€æœ‹å‹åŠæˆ‘â€œå¥èº«â€ä¸€æ ·è¢«åŠ¨ã€‚ï¼ˆç¬‘ï¼‰ æ­£å¦‚æˆ‘å¹¶ä¸çœŸçš„ç†è§£å¥èº«çš„æ„ä¹‰æ‰€åœ¨ï¼Œä»–ä»¬ä¹Ÿå½“æŠ½è±¡æ˜¯â€œè€³è¾¹é£â€ã€‚ â€œ100 ä¸ªåœ°åŒºâ€è¿™ç§ï¼Œå¤©ç„¶çš„å°±æ˜¯ç”¨å·¥å‚æ¨¡å¼æ¥æŠ½è±¡å’Œå®šåˆ¶ï¼Œè¿™åŸæœ¬æ˜¯ä¸€ç›®äº†ç„¶ã€æ¯«æ— ç–‘é—®çš„äº‹ã€‚ é‡æ„åçš„ä»£ç ï¼Œä¸»é¡µæŠ¬å¤´ç‰¹æ„æ ‡æ³¨äº†è­¦å‘Šã€‚ 123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869707172/ * å‹æƒ…æç¤ºï¼šæœ¬ç±»æ¶‚æœ‰é˜²è…è¯å“ï¼Œåˆ‡å‹¿è§¦ç¢°ï¼Œåˆ‡å‹¿è§¦ç¢°ï¼Œåˆ‡å‹¿è§¦ç¢°ï¼ * &lt;p&gt; * åœ°åŒºå®šåˆ¶åŠŸèƒ½ï¼ŒåŒ…æ‹¬ç‰¹è‰²çš„å¸ƒå±€ç­‰ï¼Œè¯·ç»§æ‰¿äº AbstractDetailChildFragmentManager å•ç‹¬ç¼–å†™ï¼ */public class XXXDetailFragment extends BaseFragment implements IResponse { protected void initView() { initViewPagerManager(); PagerAdapter pagerAdapter = new PagerAdapter(); viewPagerFix.setOffscreenPageLimit(4); viewPagerFix.setAdapter(pagerAdapter); mFragmentBinding.tabLayout.setTabData(pagerAdapter.titles); mFragmentBinding.tabLayout.setOnTabSelectListener(new OnTabSelectListener() { @Override public void onTabSelect(int position) { viewPagerFix.setCurrentItem(position); } @Override public void onTabReselect(int position) { } }); viewPagerFix.addOnPageChangeListener(new ViewPagerFix.OnPageChangeListener() { @Override public void onPageScrolled(int position, float positionOffset, int positionOffsetPixels) { KeyboardUtils.hideSoftInput(getActivity()); } @Override public void onPageSelected(int position) { mFragmentBinding.tabLayout.setCurrentTab(position); mDetailChildFragmentManager.onPageSelected(position); } @Override public void onPageScrollStateChanged(int state) { } }); } /** * viewPageré€‚é…å™¨ */ private class PagerAdapter extends FragmentPagerAdapter { String[] titles; PagerAdapter() { super(getChildFragmentManager()); titles = mDetailChildFragmentManager.getTitles(); } @Override public Fragment getItem(int position) { return mDetailChildFragmentManager.getItem(position); } @Override public Object instantiateItem(ViewGroup container, int position) { Object object = super.instantiateItem(container, position); return mDetailChildFragmentManager.instantiateItem(container, position, object); } @Override public int getCount() { return mDetailChildFragmentManager.getCount(); } }} ä»£ç æ˜¯å¦‚ä½•å‰ªä¸æ–­ç†è¿˜ä¹±çš„ï¼Ÿå¬è¯´è¿‡â€œä»£ç è€¦åˆâ€å’Œâ€œè§£è€¦â€çš„äººå¾ˆå¤šï¼Œä½†çœŸæ­£ç†è§£è¿™æ˜¯æ€ä¹ˆä¸€å›äº‹çš„ï¼Œææ€•åªæœ‰ä½  ~ å› ä¸ºå“ªæ€•ä½ ä¸çŸ¥ï¼Œä½ ä¹Ÿå³å°†è§è¯ä¸€ä½å¸…å“¥å¦‚ä½•æ‰‹æŠŠæ‰‹å¸¦ä½ è§£è€¦ ~ æˆ‘ä»¬å…ˆæ¥çœ‹ä¸‹é‡æ„å‰çš„ä»£ç ï¼ 12345678910111213141516171819202122232425262728293031323334353637383940414243444546474849public interface XXXListNavigator { void updateRecyclerView(); void showProgressDialog(); void dismissProgressDialog(); void updateListView(); void updateLayerWrapperList(List&lt;LayerWrapper&gt; list); boolean isAnimationFinish(); void resetCount();}public class XXXListViewModel extends BaseViewModel { public void multiAddOrRemove(ArrayList&lt;String&gt; bsms, boolean isAdd) { if (null != mNavigator) { mNavigator.showProgressDialog(); } if (null == mMultiAddOrRemoveUseCase) { mMultiAddOrRemoveUseCase = new MultiAddOrRemoveUseCase(); } mUseCaseHandler.execute(mMultiAddOrRemoveUseCase, new MultiAddOrRemoveUseCase.RequestValues(isAdd, bsms, mLayerWrapperObservableField.get()), new UseCase.UseCaseCallback&lt;MultiAddOrRemoveUseCase.ResponseValue&gt;() { @Override public void onSuccess(MultiAddOrRemoveUseCase.ResponseValue response) { ToastUtils.showShort(getApplicationContext(), &quot;æ“ä½œæˆåŠŸ&quot;); clearData(); loadData(true, true); if (null != mNavigator) { mNavigator.dismissProgressDialog(); } } @Override public void onError() { ToastUtils.showShort(getApplicationContext(), &quot;æ“ä½œå¤±è´¥&quot;); if (null != mNavigator) { mNavigator.dismissProgressDialog(); } } }); }} å¯ä»¥çœ‹åˆ°ï¼ŒUI è¿‡åº¦æš´éœ²äº†â€œå¤„ç† UI é€»è¾‘æ‰€ä¾èµ–çš„è¿‡ç¨‹ APIâ€ï¼Œå¹¶åœ¨ä¸šåŠ¡ä¸­ç›´æ¥å¹²é¢„äº† UI é€»è¾‘ï¼Œè¿™æ˜¯å…¸å‹çš„ MVP å†™æ³•ï¼Œè¿™é€ æˆäº†è€¦åˆã€‚ä¸€æ—¦ UI çš„éœ€æ±‚æœ‰å˜åŠ¨ï¼ŒView å’Œ Presenter çš„ç¼–å†™è€…éƒ½ä¼šå—åˆ°ç‰µè¿ã€‚ è€Œä¸”ï¼ŒèŒè´£è¿‡å¤šé€ æˆäº†ä¾èµ–è¿‡å¤šï¼Œè¿™ä¸ª Presenter ä¼šå› ä¸ºè¿‡å¤šçš„ä¾èµ–ï¼Œè€Œè¶Šå†™è¶Šè‡ƒè‚¿ï¼šå—â€œç ´çª—æ•ˆåº”â€çš„é©±ä½¿ï¼Œåˆ«çš„ç å†œä¼šå› ä¸ºæ­¤å¤„å·²ç»æœ‰æŸä¸ªä¾èµ–ï¼Œè€Œä¸å‡æ€ç´¢çš„æ¥ç€å¾€ä¸‹å†™ã€‚ åˆ°åº•æ€æ ·æ‰ç®—è§£è€¦æ‰€è°“è§£è€¦ï¼Œæ˜¯ç¬¦åˆå·¥ç¨‹è®¾è®¡ã€ç¬¦åˆè®¾è®¡æ¨¡å¼åŸåˆ™çš„ç¼–ç ã€‚ è§£è€¦çš„æœ¬è´¨ï¼Œæˆ‘åªè¯´ä¸€éï¼š èŒè´£è¾¹ç•Œæ˜ç¡®ï¼ŒèŒè´£è¾¹ç•Œæ˜ç¡®ï¼ŒèŒè´£è¾¹ç•Œæ˜ç¡®ã€‚ ç¬¦åˆå•ä¸€èŒè´£åŸåˆ™ï¼šUI çš„èŒè´£ä»…é™äºâ€œå±•ç¤ºâ€ï¼Œä¹Ÿå°±æ˜¯å‘é€è¯·æ±‚ã€å¤„ç† UI é€»è¾‘ã€‚ä¸šåŠ¡çš„èŒè´£ä»…é™äºâ€œæä¾›æ•°æ®â€ï¼Œä¹Ÿå°±æ˜¯æ¥æ”¶è¯·æ±‚ã€å¤„ç†ä¸šåŠ¡é€»è¾‘ã€å“åº”ç»“æœæ•°æ®ã€‚ ç¬¦åˆä¾èµ–å€’ç½®åŸåˆ™ã€æœ€å°çŸ¥è¯†åŸåˆ™ï¼šUI ä¸éœ€è¦çŸ¥é“æ•°æ®æ˜¯ç»è¿‡æ€æ ·çš„å‘¨è½¬å¾—æ¥çš„ï¼Œå®ƒåªéœ€å‘é€è¯·æ±‚ï¼Œå¹¶åœ¨æ‹¿åˆ°ç»“æœæ•°æ®åï¼Œè‡ªå·±å†…éƒ¨æ¶ˆåŒ– UI é€»è¾‘ã€‚ä¸šåŠ¡åªéœ€å¤„ç†æ•°æ®å¹¶å“åº”æ•°æ®ç»™ UIï¼Œå®ƒä¸éœ€è¦çŸ¥é“ UI ä¼šæ€æ ·ä½¿ç”¨æ•°æ®ï¼Œæ›´æ— æƒå¹²é¢„ã€‚ ç»¼ä¸Šï¼Œæ— è®ºæ˜¯ UI è¿˜æ˜¯ä¸šåŠ¡ï¼Œéƒ½ä¸åº”è¿‡åº¦æš´éœ²å†…éƒ¨é€»è¾‘ API è€Œå—æ§äºäººï¼Œå®ƒä»¬åº”åªæš´éœ²è¯·æ±‚ APIï¼Œæ¥å“åº”å¤–éƒ¨çš„è¯·æ±‚ã€‚è¿‡ç¨‹é€»è¾‘åº”åªåœ¨è‡ªå·±å†…éƒ¨ç‹¬ç«‹æ¶ˆåŒ–ã€‚ 123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869707172737475767778public class XXXListBusinessProxy extends BaseBusiness&lt;XXXBus&gt; implements IXXXListFragmentRequest { @Override public void multiAddOrRemove(final XXXListDTO dto) { handleRequest((e) -&gt; { ... if (TextUtils.isEmpty(existBsms)) { sendMessage(e, new Result(XXXDataResultCode.XXX_LIST_FRAGMENT_MULTI_ADD_OR_REMOVE, false)); } else { wyhcJgDBManager.insertAllTaskOfMine(existBsms, layersConfig); sendMessage(e, new Result(XXXDataResultCode.XXX_LIST_FRAGMENT_MULTI_ADD_OR_REMOVE, true)); } return null; }); } @Override public void refreshPatternOfXXXList(final XXXListDTO dto) { handleRequest((e) -&gt; { ... count.setMyXXXCount(wyhcJgDBManager.getMyXXXPatternCount()); return new Result(XXXDataResultCode.XXX_LIST_FRAGMENT_REFRESH_COUNT, count); }); } @Override public void changeXXXPatternOfMine(final XXXListDTO dto) { handleRequest((e) -&gt; { if (toMine) { ... } else { ... sendMessage(e, new Result(XXXDataResultCode.XXX_LIST_FRAGMENT_GET_ALL_PATTERN_OF_MINE, count)); } return null; }); }}public class XXXListFragment extends BaseFragment implements IResponse { XXXBus.XXX().queryList(mDto); XXXBus.XXX().multiAddOrRemove(mDto); XXXBus.XXX().queryPattern(mDto); ... @Override public void onResult(Result testResult) { String code = (String) testResult.getResultCode(); switch (code) { case XXXDataResultCode.XXX_LIST_FRAGMENT_REFRESH_LIST: updateRecyclerView((List&lt;Wyhcrw&gt;) testResult.getResultObject()); if (isNeedUpdateCount()) { ... } else { finishLoading(); } break; case XXXDataResultCode.XXX_LIST_FRAGMENT_MULTI_ADD_OR_REMOVE: if ((boolean) testResult.getResultObject()) { loadData(true, true); } else { ToastUtils.showShort(getContext(), &quot;æ“ä½œå¤±è´¥&quot;); } dismissProgressDialog(); break; case XXXDataResultCode.XXX_LIST_FRAGMENT_REFRESH_PATTERN: ... break; default: } }} è§£è€¦æœ‰ä»€ä¹ˆå¥½å¤„ï¼Ÿè§£è€¦çš„å¥½å¤„ï¼Œç¦ç‰¹æœ€æœ‰è¯è¯­æƒã€‚ 100 å¤šå¹´å‰ï¼Œç¦ç‰¹å‘æ˜äº†ä¸–ç•Œä¸Šç¬¬ä¸€æ¡æµæ°´çº¿ï¼Œè®©å·¥äººèŒè´£è¾¹ç•Œæ˜ç¡®ï¼Œä»è€Œå¾—ä»¥åˆ†å·¥å’Œä¸“æ³¨å„è‡ªé¢†åŸŸã€‚ åŸå…ˆè£…é…ä¸€è¾†è½¦éœ€ 700 å°æ—¶ï¼Œé€šè¿‡æµæ°´çº¿åˆ†å·¥åï¼Œå¹³å‡ä¸€è¾† 12.5 å°æ—¶ï¼Œè¿™ä½¿å¾—ç”Ÿäº§æ•ˆç‡æå‡äº†è¿‘ 60 å€ï¼ è½¯ä»¶å·¥ç¨‹åŒç†ã€‚ ç”±äº UI å’Œä¸šåŠ¡èŒè´£è¾¹ç•Œæ˜ç¡®ï¼Œä¸”ç›¸äº’é€šè¿‡æ¥å£é€šä¿¡ï¼Œä½¿å¾— UI å’Œä¸šåŠ¡çš„ç¼–å†™è€…èƒ½å¤ŸçœŸæ­£çš„åˆ†å·¥ã€‚ å†™ UI çš„äººï¼Œä¸ä¼šè¢«ä¸šåŠ¡çš„ç¼–å†™æ‰“æ–­ï¼Œä»–å¯ä»¥ä¸€æ°”å‘µæˆçš„å†™è‡ªå·±çš„ UIã€‚å†™ä¸šåŠ¡çš„äººï¼ŒåŒæ ·ä¸ä¼šè¢«æ‰“æ–­ï¼Œä»–å¯ä»¥ä¸“æ³¨äºä¸šåŠ¡é€»è¾‘ã€æ•°æ®ç»“æ„å’Œç®—æ³•çš„ä¼˜åŒ–ã€‚ å†™ UI å’Œå†™ä¸šåŠ¡çš„äººï¼Œéƒ½å¯ä»¥è‡ªå·±å®ç°æ¥å£ï¼Œå»ç‹¬ç«‹çš„å®Œæˆå•å…ƒæµ‹è¯•ï¼Œå®Œå…¨ä¸å¿…ä¾èµ–å’Œç­‰å€™å¯¹æ–¹çš„å®ç°ã€‚ æœ€åï¼Œåœ¨èŒè´£è¾¹ç•Œæ˜ç¡®çš„æƒ…å†µä¸‹ï¼ŒUI å°±ç®—å†™ 100 ä¸ª UI é€»è¾‘ï¼Œé‚£ä¹Ÿæ˜¯ UIï¼Œä¸šåŠ¡å°±ç®—å†™ 100 ä¸ªä¸šåŠ¡ï¼Œé‚£ä¹Ÿæ˜¯ä¸šåŠ¡ï¼Œçº¯ç§ï¼Œæ‰€ä»¥ä¸ä¼šæ‚ä¹±ï¼Œä½•å†µæˆ‘ä»¬è¿˜å¯ä»¥å€ŸåŠ©â€œæ¥å£éš”ç¦»åŸåˆ™â€ç»§ç»­å¾€ä¸‹åˆ†å·¥ï¼ â€¦ æ€»ç»“ç»¼ä¸Šï¼Œæœ¬æ–‡ä»‹ç»äº†ä¸¤ä¸ªé‡æ„æ€è·¯ï¼š1.é¡ºåº”å¼€é—­åŸåˆ™ï¼Œå¯¹å®šåˆ¶åŒ–åŠŸèƒ½è¿›è¡ŒæŠ½è±¡ã€‚2.é¡ºåº”å•ä¸€èŒè´£ã€æœ€å°çŸ¥è¯†ã€ä¾èµ–å€’ç½®åŸåˆ™ï¼Œè®©èŒè´£è¾¹ç•Œæ˜ç¡®ï¼Œé˜²æ­¢ä»£ç è€¦åˆã€‚ çœ‹å®Œè¿™ç¯‡æ–‡ç« ï¼Œå¦‚ä½ è§‰å¾—æœ‰æ‰€æ”¶è·å’Œå¯å‘ï¼Œè¯·ä¸åç‚¹èµï¼Œä½ çš„ç‚¹èµå°±æ˜¯å¯¹æˆ‘æœ€å¤§çš„æ”¯æŒï¼ æœ¬æ¬¡é¡¹ç›®é‡æ„ç”¨åˆ°çš„ï¼Œç¬¦åˆè®¾è®¡æ¨¡å¼åŸåˆ™çš„ viabus æ¶æ„ï¼Œå·²åœ¨ GitHub å¼€æºï¼šGitHubï¼šKunMinX/android-viabus-architecture æ›´å¤šæ–‡ç« Androidï¼šå››å¤§æ¶æ„çš„ä¼˜ç¼ºç‚¹ï¼Œä½ çœŸçš„äº†è§£å—ï¼ŸViabus - å¹´è½»äººçš„ç¬¬ä¸€æ¬¾æ¶æ„wiki - 1åˆ†é’ŸæŒæ¡ ViaBus æ¶æ„çš„ä½¿ç”¨https://www.jianshu.com/p/6545767d3e54)","link":"/2018/10/21/Androidï¼šä½ è¿˜åœ¨ç­‰é‚£ä¸ªï¼Œæ‰‹æŠŠæ‰‹å¸¦ä½ é‡æ„çš„äººå‡ºç°å—ï¼Ÿ/"}],"tags":[{"name":"ViaBus","slug":"ViaBus","link":"/tags/ViaBus/"},{"name":"é¡¹ç›®æ¨è","slug":"é¡¹ç›®æ¨è","link":"/tags/é¡¹ç›®æ¨è/"},{"name":"RxJava","slug":"RxJava","link":"/tags/RxJava/"},{"name":"æ·±åº¦æ€è€ƒ","slug":"æ·±åº¦æ€è€ƒ","link":"/tags/æ·±åº¦æ€è€ƒ/"},{"name":"Web","slug":"Web","link":"/tags/Web/"},{"name":"AAC","slug":"AAC","link":"/tags/AAC/"}],"categories":[{"name":"Architecture","slug":"Architecture","link":"/categories/Architecture/"},{"name":"RxJava","slug":"RxJava","link":"/categories/RxJava/"},{"name":"Web","slug":"Web","link":"/categories/Web/"}]}